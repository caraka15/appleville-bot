"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70804],{819:(e,t,l)=>{l.d(t,{Y:()=>r});var a=l(61520),s=l(49554);let r=()=>{var e;let{state:t}=(0,a.v)(),l=null!=(e=null==t?void 0:t.xp)?e:0,r=(0,s.Zv)(l),n=(0,s.kr)(r),i=(0,s.NH)(r),o=l-n,c=0;if(null!==i){let e=i-n;e>0&&(c=o/e*100)}else c=100;return{totalXp:l,level:r,xpForCurrentLevel:n,xpForNextLevel:i,xpInCurrentLevel:o,progress:c}}},2313:(e,t,l)=>{l.d(t,{SoundsProvider:()=>c,W:()=>d,u:()=>u});var a=l(95155),s=l(70215),r=l(87020),n=l(12115);let i=(0,n.createContext)(void 0),o=["/music/1.mp3","/music/2.mp3"];function c(e){let{children:t}=e,[l,c]=(0,s.U)("sound-effects-muted",!1),[d,u]=(0,s.U)("music-muted",!1),[x,m]=(0,n.useState)(null),[h,f]=(0,n.useState)(!1),p=(0,n.useRef)(new Map),g=(0,n.useRef)(null),v=(0,n.useRef)(null);(0,n.useEffect)(()=>{["/sfx/build.wav","/sfx/coin.wav","/sfx/earn.wav","/sfx/place.wav","/sfx/shop.wav","/sfx/start.wav"].map(e=>{y(e)}),o.map(e=>{let t=new Audio;t.preload="auto",t.src=e})},[]),(0,n.useEffect)(()=>{r.O.emit("sound-settings-changed",{isSoundEffectsMuted:l,isMusicMuted:d})},[l,d]),(0,n.useEffect)(()=>{let e=()=>{r.O.emit("sound-settings-changed",{isSoundEffectsMuted:l,isMusicMuted:d})};return r.O.on("request-sound-settings",e),()=>{r.O.off("request-sound-settings",e)}},[l,d]);let y=(0,n.useCallback)(e=>{if(p.current.has(e))return;let t=new Audio;t.preload="auto",t.src=e,p.current.set(e,t)},[]);(0,n.useEffect)(()=>{if(h&&!d)return!x&&h&&(v.current=setTimeout(()=>{let e=o[Math.floor(Math.random()*o.length)];e&&m(e)},2e3)),()=>{v.current&&clearTimeout(v.current)}},[h,d,x]),(0,n.useEffect)(()=>{if(x&&!d){g.current&&g.current.pause();let e=new Audio(x);e.volume=.3,e.loop=!1,g.current=e,e.addEventListener("ended",()=>{let e=o[Math.floor(Math.random()*o.length)];e&&m(e)}),e.play().catch(e=>{console.log("Music playback failed:",e)})}else g.current&&g.current.pause();return()=>{g.current&&(g.current.pause(),g.current=null)}},[x,d]),(0,n.useEffect)(()=>()=>{g.current&&g.current.pause(),v.current&&clearTimeout(v.current),p.current.clear()},[]);let b=(0,n.useCallback)(function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l)return;h||f(!0);let s=p.current.get(e);(s=s?s.cloneNode():new Audio(e)).volume=null!=(t=a.volume)?t:.3,s.currentTime=0,s.play().catch(e=>{console.log("Sound effect playback failed:",e)})},[l,h]);return(0,a.jsx)(i.Provider,{value:{playSoundEffect:b,preloadSoundEffect:y,isSoundEffectsMuted:l,setSoundEffectsMuted:c,isMusicMuted:d,setMusicMuted:u,currentMusic:x},children:t})}function d(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useSounds must be used within a SoundsProvider");return e}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{playSoundEffect:l,preloadSoundEffect:a}=d();return(0,n.useEffect)(()=>{a(e)},[e,a]),(0,n.useCallback)(()=>{l(e,t)},[l,e,t])}},7071:(e,t,l)=>{l.d(t,{Kl:()=>C,rB:()=>E,hh:()=>A});var a=l(95155),s=l(73844),r=l(12115);function n(e){let{className:t,style:l,numberOfDots:s=20}=e,n=(0,r.useMemo)(()=>Array.from({length:s},(e,t)=>({x:Math.floor(31*Math.random()),y:Math.floor(31*Math.random()),key:t})),[]);return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",style:l,className:t,children:n.map(e=>{let{x:t,y:l,key:s}=e;return(0,a.jsx)("rect",{x:t,y:l,width:"2.4",height:"1.2",opacity:.5,fill:"currentColor"},s)})})}var i=l(18573),o=l(61520),c=l(2313),d=l(34865),u=l(87020),x=l(59434),m=l(72817),h=l(66766),f=l(15805),p=l(13229);let g=()=>{var e,t;let{plot:l,seed:s}=A(),r=E(),n=(null==s||null==(e=s.config)?void 0:e.key)?(0,d.jH)(s.config.key):null,i=n?Math.min(Math.floor(r*n.growing.length),n.growing.length-1):0;return(0,a.jsx)("div",{className:"relative flex h-full w-full flex-col items-center justify-center gap-2p-4 text-2xl",children:(0,a.jsx)(h.default,{src:(null==n?void 0:n.growing[i])||"",alt:"".concat(null==s||null==(t=s.config)?void 0:t.name," growing"),width:32,height:32,className:"".concat((null==n?void 0:n.imageStyle)||"h-[64px] w-[64px]"," object-cover")})})},v=()=>{var e;let{seed:t}=A();return(0,a.jsx)("div",{className:"flex h-full w-full cursor-pointer items-center justify-center text-2xl",children:(null==t?void 0:t.content)&&(0,a.jsx)(h.default,{src:(null==(e=t.content.growing)?void 0:e.at(-1))||"",width:32,height:32,alt:"Crop pack",className:"".concat(t.content.imageStyle||"h-[64px] w-[64px]"," animate-pulse object-cover ")})})},y=()=>(0,a.jsx)("div",{className:(0,x.cn)("z-[1] flex h-full w-full cursor-pointer items-center justify-center text-2xl"),children:"+"}),b=e=>{let{className:t}=e,{plot:l,state:s}=A(),r=E();return(0,a.jsx)("div",{className:(0,x.cn)("relative h-[4px] rounded-full bg-black p-[1px]",t),children:(0,a.jsx)("div",{className:(0,x.cn)("h-full rounded-full bg-gradient-to-r from-amber-500 to-yellow-400 transition-all duration-300",{"bg-emerald-500":"readyToHarvest"===s}),style:{width:"".concat(100*r,"%")}})})};var j=l(11518),w=l.n(j);let N=e=>{let{color:t,className:l,size:s="normal"}=e,[n,i]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=()=>{let e=[],t="small"===s?4:8;for(let l=0;l<t;l++){let t=30+40*Math.random(),a=30+40*Math.random(),r=Math.atan2(a-50,t-50),n="small"===s?8+12*Math.random():20+30*Math.random();e.push({id:Date.now()+l,x:t,y:a,duration:1+1.5*Math.random(),delay:1.5*Math.random(),moveX:Math.cos(r)*n,moveY:Math.sin(r)*n})}i(e)};e();let t=setInterval(e,3e3);return()=>clearInterval(t)},[]),(0,a.jsxs)("div",{className:"jsx-716c1ced40b64b3a "+((0,x.cn)("pointer-events-none absolute inset-0",l)||""),children:[n.map(e=>(0,a.jsx)("div",{style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),backgroundColor:t,border:"small"===s?"0.5px solid purple":"1px solid purple",animation:"sparkleMove ".concat(e.duration,"s ease-out ").concat(e.delay,"s infinite"),boxShadow:"small"===s?"0 0 4px 1px ".concat(t,", 0 0 8px 2px ").concat(t,"40"):"0 0 8px 2px ".concat(t,", 0 0 16px 4px ").concat(t,"40"),filter:"drop-shadow(0 0 ".concat("small"===s?"2px":"4px"," ").concat(t,")"),"--move-x":"".concat(e.moveX,"px"),"--move-y":"".concat(e.moveY,"px")},className:"jsx-716c1ced40b64b3a "+"absolute ".concat("small"===s?"h-[1px] w-[1px]":"h-[4px] w-[4px]")},e.id)),(0,a.jsx)(w(),{id:"716c1ced40b64b3a",children:"@keyframes sparkleMove{0%{opacity:0;transform:scale(.3)translate(0,0)}20%{opacity:1;transform:scale(1)translate(0,0)}100%{opacity:0;transform:scale(.8)translate(var(--move-x),var(--move-y))}}"})]})},k=(0,r.createContext)(void 0),C=e=>{var t,l,j,w,C;let{plot:A,className:E="",isFirstPlot:T=!1,interactive:S=!0}=e,P=(0,i.d)(),{openPlotDialog:L,disclosure:D}=(0,p.b)(),I=(0,c.u)("/sfx/earn.wav",{volume:.3}),[M,R]=(0,r.useState)(()=>(0,m.BM)(A,new Date)),{harvestPlot:_,applyModifier:O,plantSeed:F,state:z}=(0,o.v)();(0,f.A)(()=>{R((0,m.BM)(A,new Date))},200);let H=A.seed?{config:(0,d.qc)(A.seed.key),content:(0,d.jH)(A.seed.key)}:void 0,B=A.modifier?{config:(0,d.Q9)(A.modifier.key),content:(0,d.jH)(A.modifier.key)}:void 0,W=(0,a.jsxs)("button",{type:"button",className:(0,x.cn)("relative flex h-[120px] w-[120px] justify-center overflow-hidden bg-size-[64px_64px] bg-repeat align-center",S&&("idle"===M&&(null==(t=P.selectedItem)?void 0:t.key)&&(null==(l=(0,d.mT)(P.selectedItem.key))?void 0:l.metadata.type)==="seed"||(null==(j=P.selectedItem)?void 0:j.key)&&(null==(w=(0,d.mT)(P.selectedItem.key))?void 0:w.metadata.type)==="modifier"&&!B)?"z-[11] shadow-[0px_0px_45px_10px_rgba(255,234,0,1)] outline-[2px] outline-[yellow] transition-all duration-200":"",!S&&"cursor-default",E,(null==z?void 0:z.numPlots)===1&&"idle"===M&&!D.open&&S&&"glow-animate"),onClick:S?e=>{if("readyToHarvest"===M){let t=_(A.slotIndex),l={x:e.clientX,y:e.clientY};P.clearSelection(),I(),u.O.emit("coins-explode",{quantity:t.currency.amount,currency:t.currency.currency,...l}),u.O.emit("xp-explode",{amount:Math.round(t.xp/10),...l});return}if(P.selectedItem){var t,l;return(null==(t=(0,d.mT)(P.selectedItem.key))?void 0:t.metadata.type)==="seed"&&"idle"===M?void F(A.slotIndex,P.selectedItem.key):(null==(l=(0,d.mT)(P.selectedItem.key))?void 0:l.metadata.type)==="modifier"?void O(A.slotIndex,P.selectedItem.key):void 0}L(A)}:void 0,children:[(null==B?void 0:B.config)&&(0,a.jsx)(s.ClientOnly,{children:(0,a.jsx)(n,{className:"pointer-events-none absolute inset-0 z-[0] h-full w-full p-4",style:{color:(0,d.jH)(B.config.key).color}})}),(0,a.jsx)(h.default,{src:"/img/plot.jpg",alt:"Plot background",width:64,height:64,className:"absolute inset-0 z-[-1] h-full w-full",quality:100,style:{imageRendering:"pixelated"}}),{idle:(0,a.jsx)(y,{}),growing:(0,a.jsx)(g,{}),readyToHarvest:(0,a.jsx)(v,{})}[M],["growing"].includes(M)&&(0,a.jsx)(b,{className:"absolute right-4 bottom-4 left-4"}),(null==H||null==(C=H.content)?void 0:C.particleColor)&&["growing","readyToHarvest"].includes(M)&&(0,a.jsx)(N,{color:H.content.particleColor,className:"z-10"})]});return(0,a.jsx)(k.Provider,{value:{plot:A,seed:H,modifier:B,state:M},children:W})},A=()=>{let e=(0,r.useContext)(k);if(!e)throw Error("usePlot must be used within a PlotProvider");return e},E=()=>{let[e,t]=(0,r.useState)(-1),{plot:l}=A();return(0,f.A)(()=>{t(Math.floor(100*(0,m.YL)(l,new Date))/100)},200),e>-1?e:0}},13229:(e,t,l)=>{l.d(t,{PlotDialogProvider:()=>P,b:()=>L});var a=l(95155),s=l(89885),r=l(12115),n=l(61520),i=l(54165),o=l(54416),c=l(92101),d=l(84155),u=l(96022),x=l(15960),m=l(30285),h=l(17313),f=l(34865),p=l(59434),g=l(27809),v=l(7071),y=l(73599),b=l(23447),j=l(72817),w=l(14186),N=l(59929),k=l(33109),C=l(15805);let A=e=>{var t,l,s,n;let{plot:i}=e,[o,c]=(0,r.useState)(()=>(0,j.BM)(i,new Date));(0,C.A)(()=>{c((0,j.BM)(i,new Date))},200);let d=i.seed?{config:(0,f.qc)(i.seed.key),content:(0,f.jH)(i.seed.key)}:void 0,u=i.modifier?{config:(0,f.Q9)(i.modifier.key),content:(0,f.jH)(i.modifier.key)}:void 0;return(0,a.jsxs)("div",{className:"flex w-full flex-col items-start gap-2 rounded-lg border-4 border-amber-900/60 border-double bg-amber-950/90 p-1 sm:p-2shadow-lg",children:[(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:gap-[0]",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 border-amber-800/50 sm:border-r sm:px-2",children:(0,a.jsxs)("div",{className:"flex w-full items-center gap-1 rounded px-2 py-1 text-xs ".concat((e=>{switch(e){case"growing":return"bg-amber-600/30 text-amber-200 border-amber-500/40";case"readyToHarvest":return"bg-emerald-600/30 text-emerald-200 border-emerald-500/40";default:return"bg-stone-600/30 text-stone-300 border-stone-500/40"}})(o)),children:[(e=>{switch(e){case"growing":return(0,a.jsx)(w.A,{className:"h-3 w-3"});case"readyToHarvest":return(0,a.jsx)(N.A,{className:"h-3 w-3"});default:return(0,a.jsx)("div",{className:"h-3 w-3 rounded-full bg-stone-400"})}})(o),(0,a.jsx)("span",{className:"capitalize",children:"readyToHarvest"===o?"Ready":o})]})}),(0,a.jsx)("div",{className:"flex min-w-0 flex-1 items-center gap-2 px-3",children:(null==d?void 0:d.config)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-8 w-8 flex-shrink-0 overflow-hidden rounded border border-amber-800/60 bg-amber-900/50",children:(0,a.jsx)("img",{src:(null==d?void 0:d.content)?d.content.growing.at(-1):"/placeholder.svg",alt:null==d||null==(t=d.config)?void 0:t.name,className:"h-full w-full object-cover"})}),(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"flex-1 truncate font-medium text-amber-50 text-xs",children:null==d||null==(l=d.config)?void 0:l.name}),(0,a.jsxs)("span",{className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)(k.A,{className:"h-2.5 w-2.5 text-amber-300"}),(0,a.jsx)(y.e,{type:(null==d||null==(s=d.config)?void 0:s.yield.currency)==="AP"?"ap":"coins",value:null==d||null==(n=d.config)?void 0:n.yield.amount,className:"text-amber-300"})]})]})})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-400/70",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Empty plot"})]})})]}),(null==u?void 0:u.config)&&i.modifier&&(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-1 px-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 rounded border border-amber-700/40 bg-amber-950/60 px-2 py-1 text-xs",children:[(0,a.jsxs)("span",{className:"text-amber-200",children:[u.config.name,":"]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[1!==u.config.growthMultiplier&&(0,a.jsx)("span",{className:"text-sky-300",children:(0,p.w)(u.config.growthMultiplier)}),1!==u.config.growthMultiplier&&1!==u.config.yieldMultiplier&&(0,a.jsx)("span",{className:"text-amber-500",children:"•"}),1!==u.config.yieldMultiplier&&(0,a.jsx)("span",{className:"text-lime-300",children:(0,p.X)(u.config.yieldMultiplier)}),(0,a.jsx)("span",{className:"text-amber-500",children:"•"}),(0,a.jsxs)("span",{className:"text-orange-300",children:[(0,b.x)(Math.max(0,Math.ceil((i.modifier.endsAt.getTime()-Date.now())/1e3)))," ","left"]})]})]},u.config.key)})]})},E=()=>{var e,t;let{currentPlot:l,closePlotDialog:s}=L(),{state:r,plantSeed:i,applyModifier:o}=(0,n.v)(),y=(0,c.I)();if(!l)return null;let b=(null==r||null==(e=r.items)?void 0:e.filter(e=>{var t;return(null==(t=(0,f.mT)(e.key))?void 0:t.metadata.type)==="seed"}))||[],j=(null==r||null==(t=r.items)?void 0:t.filter(e=>{var t;return(null==(t=(0,f.mT)(e.key))?void 0:t.metadata.type)==="modifier"}))||[],w=l.seed,N=l.modifier,k=(null==r?void 0:r.numPlots)===1;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5 px-2 pt-8 pb-2",style:{backgroundImage:"url(/img/grass.jpg)"},children:[(0,a.jsx)(v.Kl,{plot:l,interactive:!1,className:"z-20"}),(0,a.jsx)(A,{plot:l})]}),(!w||!N)&&(0,a.jsxs)(h.tU,{defaultValue:w?"modifiers":"seeds",className:"flex flex-col gap-2 px-2 pb-2",children:[(0,a.jsxs)(h.j7,{className:"w-full bg-black/20",children:[!w&&(0,a.jsx)(h.Xi,{value:"seeds",className:"w-full flex-1 transition-all",children:"PLANT SEED"}),!N&&(0,a.jsx)(h.Xi,{value:"modifiers",className:"w-full flex-1 transition-all",children:"APPLY BOOSTER"})]}),(0,a.jsx)(h.av,{value:"seeds",className:"flex-1",children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:w?(0,a.jsx)("div",{className:"flex min-h-[100px] items-center justify-center text-black/60",children:"Plot already has a seed planted"}):0===b.length?(0,a.jsxs)("div",{className:"flex min-h-[100px] flex-col items-center justify-center gap-4 text-black/60",children:["No seeds in inventory",(0,a.jsxs)(m.$,{className:(0,p.cn)("w-full",k&&"glow-animate"),onClick:()=>{y.shop.onOpen()},children:[(0,a.jsx)(g.A,{})," OPEN SHOP"]})]}):b.map(e=>({item:e,config:(0,f.mT)(e.key)})).filter(e=>{let{config:t}=e;return(null==t?void 0:t.metadata.type)==="seed"}).sort((e,t)=>{var l,a;return((null==(l=e.config)?void 0:l.metadata.type)==="seed"?e.config.metadata.growDuration:0)-((null==(a=t.config)?void 0:a.metadata.type)==="seed"?t.config.metadata.growDuration:0)}).map((e,t)=>{var r;let{item:n,config:o}=e;if(!o)return null;let c=0===t&&1===b.length,h=(0,f.jH)(o.key),g=(0,a.jsx)(m.$,{size:"sm",disabled:0===n.quantity,onClick:()=>{var e;return e=n.key,void(i(l.slotIndex,e),s())},className:(0,p.cn)("bg-green-600 hover:bg-green-700 disabled:opacity-50",{"glow-animate":c}),children:"Plant"});return(0,a.jsx)(x.G9,{title:(0,a.jsx)(d.g,{title:"".concat(o.name," Seeds"),quantity:n.quantity}),description:(0,a.jsx)(u.g,{config:o}),image:(0,a.jsx)(x.Dy,{src:null!=(r=h.pack)?r:"",alt:"".concat(o.name," Seeds")}),rightSide:g},n.key)})})}),(0,a.jsx)(h.av,{value:"modifiers",children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:0===j.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 py-2 text-black/60",children:["No boosters in inventory",(0,a.jsxs)(m.$,{className:(0,p.cn)("w-full"),onClick:()=>{y.shop.onOpen()},children:[(0,a.jsx)(g.A,{})," OPEN SHOP"]})]}):j.map(e=>{var t;let r=(0,f.mT)(e.key);if(!r||"modifier"!==r.metadata.type)return null;let n=(0,f.jH)(r.key),i=(0,a.jsx)(m.$,{size:"sm",disabled:0===e.quantity,onClick:()=>{var t;return t=e.key,void(o(l.slotIndex,t),s())},className:"bg-green-600 hover:bg-green-700 disabled:opacity-50",children:"Apply"});return(0,a.jsx)(x.G9,{title:(0,a.jsx)(d.g,{title:r.name,quantity:e.quantity}),description:(0,a.jsx)(u.g,{config:r}),image:(0,a.jsx)(x.Dy,{src:null!=(t=n.pack)?t:"",alt:r.name}),rightSide:i},e.key)})})})]})]})},T=()=>{let{disclosure:e,closePlotDialog:t}=L();return(0,a.jsxs)(i.lG,{onOpenChange:e.set,open:e.open,children:[(0,a.jsx)(i.LC,{className:"opacity-0"}),(0,a.jsxs)(i.Cf,{className:"pixel-scrollbar max-h-[600px] overflow-y-auto rounded-xl border-amber-900/60 border-double bg-[#f5b76e] p-0 sm:max-w-[450px]",showCloseButton:!1,children:[(0,a.jsx)(i.L3,{className:"sr-only",children:"Plot Details"}),(0,a.jsx)("button",{type:"button",className:"absolute top-4 right-4 w-[24px] cursor-pointer",onClick:t,children:(0,a.jsx)(o.A,{})}),(0,a.jsx)(E,{})]})]})},S=(0,r.createContext)(void 0),P=e=>{let{children:t}=e,[l,i]=(0,r.useState)(null),o=(0,s.j)(),{state:c}=(0,n.v)(),d=l&&(null==c?void 0:c.plots)&&c.plots.find(e=>e.id===l)||null;return(0,a.jsxs)(S.Provider,{value:{currentPlot:d,openPlotDialog:e=>{i(e.id),o.onOpen()},closePlotDialog:()=>{i(null),o.onClose()},disclosure:o},children:[t,(0,a.jsx)(T,{})]})},L=()=>{let e=(0,r.useContext)(S);if(!e)throw Error("usePlotDialog must be used within a PlotProvider");return e}},14217:(e,t,l)=>{l.d(t,{O:()=>a});let a={coinsPerDay:10,cooldownHours:24}},17313:(e,t,l)=>{l.d(t,{Xi:()=>o,av:()=>c,j7:()=>i,tU:()=>n});var a=l(95155),s=l(30888);l(12115);var r=l(59434);function n(e){let{className:t,...l}=e;return(0,a.jsx)(s.bL,{"data-slot":"tabs",className:(0,r.cn)("flex flex-col gap-2",t),...l})}function i(e){let{className:t,...l}=e;return(0,a.jsx)(s.B8,{"data-slot":"tabs-list",className:(0,r.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...l})}function o(e){let{className:t,...l}=e;return(0,a.jsx)(s.l9,{"data-slot":"tabs-trigger",className:(0,r.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}function c(e){let{className:t,...l}=e;return(0,a.jsx)(s.UC,{"data-slot":"tabs-content",className:(0,r.cn)("flex-1 outline-none",t),...l})}},18573:(e,t,l)=>{l.d(t,{SelectorProvider:()=>o,d:()=>c});var a=l(95155),s=l(34865),r=l(12115),n=l(61520);let i=(0,r.createContext)(void 0),o=e=>{var t,l;let{children:o}=e,[c,d]=(0,r.useState)(null),{state:u}=(0,n.v)(),x=c&&(null==u?void 0:u.items)&&u.items.find(e=>e.key===c.key)||null,m=()=>{d(null)};return(0,r.useEffect)(()=>{x&&0!==x.quantity||m()},[x]),(0,a.jsxs)(i.Provider,{value:{selectItem:e=>d({key:e.key}),selectedItem:x,clearSelection:m},children:[x?(0,a.jsx)("div",{className:"fixed inset-0 z-[10] flex items-end justify-center bg-black/50 p-4 pb-50",onClick:()=>{console.log("clear selection, overlay"),m()},children:x&&(0,a.jsxs)("div",{className:"z-[59] rounded-lg bg-black/80 px-4 py-2 font-semibold text-lg text-white",children:[(null==(t=(0,s.mT)(x.key))?void 0:t.metadata.type)==="seed"?"Planting":"Applying"," ",(null==(l=(0,s.mT)(x.key))?void 0:l.name)||x.key," (x",x.quantity,")"]})}):null,o]})},c=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useSelector must be used within a SelectorProvider");return e}},23447:(e,t,l)=>{l.d(t,{x:()=>a});let a=e=>{let t=Math.floor(e/3600),l=Math.floor(e%3600/60);if(t>0||l>0){let e=[];return t>0&&e.push("".concat(t,"hr")),l>0&&e.push("".concat(l,"min")),e.join(" ")}return"".concat(e%60,"s")}},30285:(e,t,l)=>{l.d(t,{$:()=>o});var a=l(95155),s=l(99708),r=l(74466),n=l(59434);let i=(0,r.F)("inline-flex shrink-0 items-center justify-center gap-2 whitespace-nowrap rounded-md font-medium text-sm outline-none transition-all focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:pointer-events-none disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:bg-destructive/60 dark:focus-visible:ring-destructive/40",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:border-input dark:bg-input/30 dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 gap-1.5 rounded-md px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:l,size:r,asChild:o=!1,...c}=e,d=o?s.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,n.cn)(i({variant:l,size:r,className:t})),...c})}},42220:(e,t,l)=>{l.d(t,{S:()=>d,c:()=>u});var a=l(90484),s=l(46298),r=l(23802),n=l(49509);let i=a._.NEXT_PUBLIC_THIRDWEB_CLIENT_ID,o=n.env.THIRDWEB_SECRET_KEY,c=a._.NEXT_PUBLIC_CHAIN,d=(0,s.N)({...o?{secretKey:o}:i?{clientId:i}:{clientId:"placeholder"}}),u={mainnet:(0,r.xH)({id:42793,name:"Etherlink Mainnet",nativeCurrency:{name:"Tezos",symbol:"XTZ",decimals:18},rpc:"https://42793.rpc.thirdweb.com",blockExplorers:[{name:"Etherlink Explorer",url:"https://explorer.etherlink.com"}]}),testnet:(0,r.xH)({id:128123,name:"Etherlink Testnet",nativeCurrency:{name:"Tezos Testnet",symbol:"XTZ",decimals:18},rpc:"https://128123.rpc.thirdweb.com",blockExplorers:[{name:"Etherlink Test Explorer",url:"https://testnet.explorer.etherlink.com"}]})}[c]},46830:(e,t,l)=>{l.d(t,{T:()=>o});var a=l(95155),s=l(59434),r=l(12115),n=l(61520),i=l(73599);let o=e=>{var t,l;let{className:o}=e,{state:c,query:d}=(0,n.v)(),[u,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),f=(0,r.useRef)(null),p=(0,r.useRef)(null),g=(0,r.useRef)(null),v=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(c){if(null!==f.current&&c.coins!==f.current){let e=c.coins-f.current;g.current&&clearTimeout(g.current),x(t=>null!==t?t+e:e),g.current=setTimeout(()=>{x(null),g.current=null},2e3)}if(f.current=c.coins,null!==p.current&&c.ap!==p.current){let e=c.ap-p.current;v.current&&clearTimeout(v.current),h(t=>null!==t?t+e:e),v.current=setTimeout(()=>{h(null),v.current=null},2e3)}p.current=c.ap}},[null==c?void 0:c.coins,null==c?void 0:c.ap]),(0,r.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),v.current&&clearTimeout(v.current)},[]),(0,a.jsx)("div",{className:(0,s.cn)(o),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative z-2",id:"coins-count",children:[(0,a.jsx)(i.e,{type:"coins",value:null!=(t=null==c?void 0:c.coins)?t:0}),null!==u&&(0,a.jsxs)("span",{className:"absolute mt-[2px] ml-2 animate-in rounded-md px-2 font-semibold text-black text-sm ".concat(u>0?"bg-green-400":"bg-orange-400"),children:[u>0?"+":"",u.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,a.jsxs)("div",{className:"relative",id:"ap-count",children:[(0,a.jsx)(i.e,{type:"ap",value:null!=(l=null==c?void 0:c.ap)?l:0}),null!==m&&(0,a.jsxs)("span",{className:"absolute mt-[2px] ml-2 rounded-md px-2 font-semibold text-black text-sm ".concat(m>0?"bg-green-400":"bg-orange-400"),children:[m>0?"+":"",m.toLocaleString(void 0,{maximumFractionDigits:2})]})]})]})})}},47121:(e,t,l)=>{let a;l.d(t,{TRPCReactProvider:()=>j,F:()=>y});var s=l(95155),r=l(26715),n=l(80828),i=l(50409),o=l(12115),c=l(99177);let d=[2,1,0,2,1,2],u={META_HASH:"x-xcsa3d",CLIENT_TIME:"x-dbsv",TRACE_ID:"x-dsa"};async function x(e,t){let l=new TextEncoder,a=l.encode(e),s=l.encode(t),r=await crypto.subtle.importKey("raw",a,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return Array.from(new Uint8Array(await crypto.subtle.sign("HMAC",r,s))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function m(e){let t=Date.now(),l=function(){let e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}(),a=JSON.stringify(e),s="".concat(t,".").concat(l,".").concat(a);return{signature:await x((()=>{let e=["bbsds!eda","2","3ed2@#@!@#Ffdf#@!","4"];return d.map(t=>e[t]).join("")})(),s),timestamp:t,nonce:l}}var h=l(63366),f=l(52775),p=l(81451),g=l(76106);l(49509);let v=()=>(null!=a||(a=new f.E({defaultOptions:{queries:{staleTime:3e4},dehydrate:{serializeData:c.Ay.serialize,shouldDehydrateQuery:e=>(0,p.XS)(e)||"pending"===e.state.status},hydrate:{deserializeData:c.Ay.deserialize}}})),a),y=(0,i.pY)();function b(e){let{children:t}=e,l=v(),[a]=(0,o.useState)(()=>y.createClient({links:[(0,n.$H)({enabled:e=>"down"===e.direction&&e.result instanceof Error}),(0,h.l)(),()=>e=>{let{next:t,op:l}=e;return(0,g.sH)(e=>{if("mutation"!==l.type)return t(l).subscribe({next:t=>e.next(t),error:t=>e.error(t),complete:()=>e.complete()});(async()=>{try{var a;let{signature:s,timestamp:r,nonce:n}=await m(l.input),i={...l,context:{...l.context||{},headers:{...(null==(a=l.context)?void 0:a.headers)||{},[u.META_HASH]:s,[u.CLIENT_TIME]:r.toString(),[u.TRACE_ID]:n}}};return t(i).subscribe({next:t=>e.next(t),error:t=>e.error(t),complete:()=>e.complete()})}catch(t){e.error(new n.HN(t instanceof Error?t.message:"Signing failed"))}})()})},(0,n.N9)({transformer:c.Ay,url:"".concat(window.location.origin,"/api/trpc"),headers:e=>{let t=new Headers;t.set("x-trpc-source","nextjs-react");let l=localStorage.getItem("auth-token");if(l&&t.set("authorization",l),e.opList)for(let l of e.opList){var a;if(null==(a=l.context)?void 0:a.headers){let e=l.context.headers;e[u.META_HASH]&&t.set(u.META_HASH,e[u.META_HASH]),e[u.CLIENT_TIME]&&t.set(u.CLIENT_TIME,e[u.CLIENT_TIME]),e[u.TRACE_ID]&&t.set(u.TRACE_ID,e[u.TRACE_ID])}}return t}})]}));return(0,s.jsx)(y.Provider,{client:a,queryClient:l,children:t})}function j(e){let t=v();return(0,s.jsx)(r.QueryClientProvider,{client:t,children:(0,s.jsx)(b,{children:e.children})})}},47262:(e,t,l)=>{l.d(t,{S:()=>i});var a=l(95155),s=l(67820),r=l(5196);l(12115);var n=l(59434);function i(e){let{className:t,...l}=e;return(0,a.jsx)(s.bL,{"data-slot":"checkbox",className:(0,n.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...l,children:(0,a.jsx)(s.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(r.A,{className:"size-3.5"})})})}},49554:(e,t,l)=>{l.d(t,{NH:()=>i,Wm:()=>s,Zv:()=>r,kr:()=>n});let a=[0,100,300,600,1e3,1500,2500,4e3,6e3,9e3,12e3,15e3,18e3,21e3,25e3,3e4,35e3,4e4],s=e=>(e.currency,10*e.amount),r=e=>{let t=a.findIndex(t=>t>e);return -1===t?a.length:t},n=e=>{let t=e-1;return t<0||t>=a.length?0:a[t]},i=e=>{var t;return e<1||e>=a.length?null:null!=(t=a[e])?t:null}},54165:(e,t,l)=>{l.d(t,{Cf:()=>u,Es:()=>m,L3:()=>h,LC:()=>d,c7:()=>x,lG:()=>i,rr:()=>f,zM:()=>o});var a=l(95155),s=l(15452),r=l(54416),n=l(59434);function i(e){let{...t}=e;return(0,a.jsx)(s.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,a.jsx)(s.l9,{"data-slot":"dialog-trigger",...t})}function c(e){let{...t}=e;return(0,a.jsx)(s.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{className:t,...l}=e;return(0,a.jsx)(s.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/10 backdrop-blur-sm data-[state=closed]:animate-out data-[state=open]:animate-in",t),...l})}function u(e){let{className:t,children:l,showCloseButton:i=!0,...o}=e;return(0,a.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,a.jsx)(d,{}),(0,a.jsxs)(s.UC,{"data-slot":"dialog-content",className:(0,n.cn)("data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 p-4 shadow-lg duration-200 data-[state=closed]:animate-out data-[state=open]:animate-in sm:max-w-lg",t),...o,children:[l,i&&(0,a.jsxs)(s.bm,{"data-slot":"dialog-close",className:"absolute top-4 right-4 rounded-xs opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-hidden focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",children:[(0,a.jsx)(r.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function x(e){let{className:t,...l}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...l})}function m(e){let{className:t,...l}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...l})}function h(e){let{className:t,...l}=e;return(0,a.jsx)(s.hE,{"data-slot":"dialog-title",className:(0,n.cn)("font-semibold text-lg leading-none",t),...l})}function f(e){let{className:t,...l}=e;return(0,a.jsx)(s.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...l})}},58702:(e,t,l)=>{l.d(t,{WalletAuthProvider:()=>A,A:()=>E});var a=l(95155),s=l(90484),r=l(42220),n=l(12115),i=l(2579),o=l(3702),c=l(23316),d=l(15156);let u="dau_last_call_1",x="dau_tried_today_1";var m=l(47121),h=l(26715),f=l(45493),p=l(35695),g=l(56671),v=l(74180),y=l(33593),b=l(31245),j=l(27843),w=l(73844),N=l(72352);let k=e=>{let{isVisible:t,message:l="Connecting wallet..."}=e;return t?(0,a.jsxs)("div",{className:"fixed top-0 right-0 text-white  z-50 flex items-center gap-2 rounded-lg bg-black px-3 py-2 text-sm shadow-lg backdrop-blur-sm border",children:[(0,a.jsx)(N.y,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:l})]}):null},C=(0,n.createContext)(void 0),A=e=>{var t,l,N,A,E,T,S;let{children:P}=e,L=(0,p.useRouter)(),{data:D,status:I,update:M}=(0,f.wV)(),R=(0,d.L)(),_=(0,v.z)(),O=(0,h.useQueryClient)(),F=(0,y.u)(),z=(0,p.useSearchParams)().get("ref"),[H,B]=(0,n.useState)(),[W,U]=(0,n.useState)(!1),[V,X]=(0,n.useState)(!1),q=null==D||null==(l=D.user)||null==(t=l.walletAddress)?void 0:t.toLowerCase(),Y=null==R||null==(N=R.address)?void 0:N.toLowerCase();(()=>{let e=(0,d.L)(),t=(0,n.useCallback)(()=>{if(!(null==e?void 0:e.address))return null;let t="".concat(u,"_").concat(e.address.toLowerCase()),l=localStorage.getItem(t);return l?new Date(l):null},[null==e?void 0:e.address]),l=(0,n.useCallback)(t=>{if(!(null==e?void 0:e.address))return;let l="".concat(u,"_").concat(e.address.toLowerCase());localStorage.setItem(l,t.toISOString())},[null==e?void 0:e.address]),a=(0,n.useCallback)(()=>{if(!(null==e?void 0:e.address))return!1;let t="".concat(x,"_").concat(e.address.toLowerCase()),l=localStorage.getItem(t);if(!l)return!1;let a=new Date(l),s=new Date;return a.toDateString()===s.toDateString()},[null==e?void 0:e.address]),m=(0,n.useCallback)(()=>{if(!(null==e?void 0:e.address))return;let t="".concat(x,"_").concat(e.address.toLowerCase());localStorage.setItem(t,new Date().toISOString())},[null==e?void 0:e.address]),h=(0,n.useCallback)(()=>{let e=t();return!e||(new Date().getTime()-e.getTime())/36e5>=24},[t]),f=(0,n.useCallback)(async()=>{if(console.log("dau",null==e?void 0:e.address),!e||!h()||a())return!1;try{m();let t=(0,i.P)({client:r.S,chain:r.c,address:"0xBD311A869c8C14558e5f60c55FF56eB74c35eAf8"}),a=(0,o.m)({contract:t,method:"function visitFarm()",params:[]}),s=await (0,c.sendTransaction)({transaction:a,account:e});return console.log("DAU tracking - visitFarm successful:",s.transactionHash),l(new Date),!0}catch(e){return console.error("DAU tracking - visitFarm failed, giving up for today:",e),!1}},[e,h,a,m,l]);return(0,n.useEffect)(()=>{if("testnet"===(s._.NEXT_PUBLIC_CHAIN||"testnet"))return void console.log("DAU tracking - skipping on testnet");if(e&&h()&&!a()){let t=setTimeout(async()=>{try{e.address&&await f()}catch(e){console.log("DAU tracking - account not ready yet, will retry on next session")}},5e3);return()=>clearTimeout(t)}},[e,h,f,a]),t()})();let $="loading"===I,G=!!(null==D||null==(A=D.user)?void 0:A.walletAddress),K=G&&(null==(T=D.user)||null==(E=T.walletAddress)?void 0:E.toLowerCase())===(null==R||null==(S=R.address)?void 0:S.toLowerCase()),Q=m.F.auth.me.useQuery(void 0,{enabled:G,retry:!1});(0,n.useEffect)(()=>{Q.error&&(g.o.error("Error fetching user"),el())},[Q.error]);let J=m.F.useUtils(),Z=(0,b.Z)({client:r.S,wallets:[(0,j.q)({auth:{options:["google","discord","x"]},smartAccount:{chain:r.c,sponsorGas:!0}})],onConnect:e=>console.log("Auto-connected wallet:",e),onTimeout:()=>{console.warn("Auto-connect timed out"),g.o.error("Auto-connect timed out. Please try again.")}}),ee=m.F.auth.ensureUser.useMutation(),et=async e=>{if(!W){U(!0);try{console.log("Connecting wallet:",e);let t=await ee.mutateAsync({walletAddress:e.toLowerCase(),referralCode:null!=z?z:void 0});z&&t.user.createdAt<new Date(Date.now()-1e4)&&g.o.info("You were referred, but you already have an account.");let l="",a="";if(R){let t={action:"sign-in",address:e.toLowerCase(),timestamp:new Date().toISOString(),nonce:Math.random().toString(36).substring(2,15)};l=JSON.stringify(t),a=await R.signMessage({message:l})}else console.log("No thirdweb account found data");let s=await (0,f.Jv)("credentials",{walletAddress:e.toLowerCase(),message:l,signature:a,redirect:!1});(null==s?void 0:s.error)?(console.error("Sign-in failed:",s.error),g.o.error("Failed to sign in. Please try again.")):(null==s?void 0:s.ok)&&(console.log("Successfully signed in"),console.log("Session updated:","sessionAddress",q),await J.auth.me.invalidate(),L.refresh())}catch(e){el(),console.error("Wallet connection error:",{wallet:_,error:e}),_&&F.disconnect(_),g.o.error("Failed to connect wallet. Please try again.")}finally{U(!1)}}},el=async()=>{console.log("Logging out...",{thirdwebAddress:Y,sessionAddress:q,sessionStatus:I});try{if(O.clear(),_)try{F.disconnect(_)}catch(e){console.error("Failed to disconnect ThirdWeb wallet:",e)}await (0,f.CI)({redirect:!1}),J.auth.me.setData(void 0,void 0),B(null),L.refresh()}catch(e){console.error("Logout error:",e)}};(0,n.useEffect)(()=>{if($)return;let e=setTimeout(()=>X(!0),7e3);return()=>clearTimeout(e)},[$]);let ea=Z.isLoading||W;return(0,n.useEffect)(()=>{if(!W&&"loading"!==I){if(console.log({thirdwebAddress:Y,sessionAddress:q,newlyConnectedAddress:H}),Y&&!q&&!H){console.log("No session address, but thirdweb present, validating wallet and updating session"),et(Y);return}if(!V)return void console.log("Waiting for auto-connect time to pass before checking if we should disconnect...");if(Y&&q&&Y!==q){console.log("Wallet address mismatch, disconnecting"),el();return}if(!Y){console.log("No thirdweb address, allowing in for now"),el();return}}},[Y,q,V,I,H]),(0,a.jsxs)(C.Provider,{value:{me:Q,logout:el,isSessionLoading:$,isWalletSyncing:ea,isAuthenticated:K,isConnecting:W},children:[P,(0,a.jsx)(w.ClientOnly,{children:(0,a.jsx)(k,{isVisible:"authenticated"===I&&(W||!V&&q!==Y),message:W?"Connecting wallet...":"Checking connection..."})})]})},E=()=>{let e=(0,n.useContext)(C);if(!e)throw Error("useAuth must be used within a WalletAuthProvider");return e}},61520:(e,t,l)=>{l.d(t,{GameStateProvider:()=>m,v:()=>h});var a=l(95155),s=l(14217),r=l(34865),n=l(41170),i=l(47121),o=l(12115),c=l(49554);function d(e,t){var l,a;if((null==(l=e.modifier)?void 0:l.key)&&(null==(a=e.modifier)?void 0:a.endsAt)&&t<e.modifier.endsAt){let t=(0,r.mT)(e.modifier.key);if(t&&"modifier"===t.metadata.type)return{...t,growthMultiplier:t.metadata.growthMultiplier,yieldMultiplier:t.metadata.yieldMultiplier,duration:t.metadata.duration,yieldCurrencyRestriction:t.metadata.yieldCurrencyRestriction}}}var u=l(72817);let x=(0,o.createContext)(void 0),m=e=>{var t;let{children:l,initialData:m}=e,[h,f]=(0,o.useState)(m),p=i.F.core.getState.useQuery(void 0,{staleTime:3e4,refetchOnWindowFocus:!1,refetchOnMount:!1,initialData:m}),{batchHarvest:g,batchPlantSeed:v,batchApplyModifier:y,batchBuyItem:b}=(()=>{i.F.useUtils();let e=i.F.core.plantSeed.useMutation(),t=i.F.core.harvest.useMutation(),l=i.F.core.applyModifier.useMutation(),a=i.F.core.buyItem.useMutation(),s=(0,o.useRef)([]),r=(0,o.useRef)(null),n=(0,o.useCallback)(async()=>{let r=[...s.current];if(s.current=[],0===r.length)return;let n=r.filter(e=>"harvest"===e.type),i=r.filter(e=>"plantSeed"===e.type),o=r.filter(e=>"applyModifier"===e.type),c=r.filter(e=>"buyItem"===e.type),d=async(e,t,l)=>{if(0!==e.length)try{let a=l(e),s=await t(a);for(let t of e)t.resolve(s)}catch(t){for(let l of e)l.reject(t)}};await Promise.all([d(n,e=>t.mutateAsync(e),e=>({slotIndexes:e.map(e=>e.slotIndex)})),d(i,t=>e.mutateAsync(t),e=>({plantings:e.map(e=>({slotIndex:e.slotIndex,seedKey:e.seedKey}))})),d(o,e=>l.mutateAsync(e),e=>({applications:e.map(e=>({slotIndex:e.slotIndex,modifierKey:e.modifierKey}))})),d(c,e=>a.mutateAsync(e),e=>({purchases:e.map(e=>({key:e.key,quantity:e.quantity}))}))])},[t,e,l,a]),c=(0,o.useCallback)(()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{n()},800)},[n]),d=(0,o.useCallback)(e=>new Promise((t,l)=>{let a={...e,id:"".concat(Date.now(),"-").concat(Math.random()),timestamp:Date.now(),resolve:t,reject:l};s.current.push(a),c()}),[c]),u=(0,o.useCallback)(e=>d({type:"harvest",slotIndex:e}),[d]),x=(0,o.useCallback)((e,t)=>d({type:"plantSeed",slotIndex:e,seedKey:t}),[d]),m=(0,o.useCallback)((e,t)=>d({type:"applyModifier",slotIndex:e,modifierKey:t}),[d]);return{batchHarvest:u,batchPlantSeed:x,batchApplyModifier:m,batchBuyItem:(0,o.useCallback)((e,t)=>d({type:"buyItem",key:e,quantity:t}),[d]),flushBatch:(0,o.useCallback)(()=>(r.current&&(clearTimeout(r.current),r.current=null),n()),[n]),queueSize:s.current.length}})(),j=i.F.core.buyPlot.useMutation({onError:()=>k()}),w=i.F.core.collectFarmhouse.useMutation({onError:()=>k()}),N=i.F.prestige.performReset.useMutation({onError:()=>k(),onSuccess:()=>{f(void 0),p.refetch()}});(0,o.useEffect)(()=>{p.data&&f(p.data)},[p.data]),(0,o.useEffect)(()=>{let e=setInterval(()=>{f(e=>{if(!e)return e;let t=new Date,l=!1,a=e.plots.map(e=>{var a;return(null==(a=e.modifier)?void 0:a.endsAt)&&t>=e.modifier.endsAt?(l=!0,{...e,modifier:void 0}):e});return l?{...e,plots:a}:e})},5e3);return()=>clearInterval(e)},[]);let k=(e,t)=>{t&&e&&console.warn("".concat(t," failed:"),e),f(void 0),p.refetch()},C=e=>{f(t=>{if(!t)return t;try{return e(t)}catch(e){return console.warn("Optimistic update failed:",e),t}})},A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{...e,coins:e.coins+t,ap:e.ap+l}},E=(e,t)=>{let l=new Map(e.map(e=>[e.key,{...e}]));for(let{key:e,quantityChange:a}of t){let t=l.get(e);t?(t.quantity+=a,t.quantity<=0&&l.delete(e)):a>0&&l.set(e,{key:e,quantity:a})}return Array.from(l.values())},T=(e,t,l)=>e.map(e=>e.slotIndex===t?{...e,...l}:e),S=async(e,t)=>{try{let l=function(e,t){let l=(0,r.mT)(e);if(!(null==l?void 0:l.price))throw Error("Item ".concat(e," does not have a price defined or does not exist."));let a=l.price.amount*t;return{cost:{amount:a,currency:l.price.currency},coinsDeduction:"coins"===l.price.currency?a:0,apDeduction:"AP"===l.price.currency?a:0}}(e,t),a=(0,r.mT)(e),s=0;(null==a?void 0:a.metadata.type)==="ap-exchange"&&(s=a.metadata.yield.amount*t),C(a=>{let r=E(a.items,[{key:e,quantityChange:t}]);return A({...a,items:r},-l.coinsDeduction,-l.apDeduction+s)});try{await b(e,t)}catch(e){throw k(e,"buyItem"),e}}catch(t){throw console.warn("Error buying item ".concat(e,":"),t),t}},P=(0,n.mA)(null!=(t=null==h?void 0:h.prestigeLevel)?t:null);return(0,a.jsx)(x.Provider,{value:{state:h,prestigeMultiplier:P,buyItem:S,buyPlot:()=>{var e,t;let l=(null==h?void 0:h.plots)?(0,u.EM)(h.plots.length):void 0;return l?("coins"===l.currency?(null!=(e=null==h?void 0:h.coins)?e:0)>=l.amount:(null!=(t=null==h?void 0:h.ap)?t:0)>=l.amount)?void(j.mutate(),C(e=>{let t=e.plots.length+1;return A({...e,plots:[...e.plots,{id:-t,slotIndex:t,seed:void 0,modifier:void 0}],numPlots:e.numPlots+1},"coins"===l.currency?-l.amount:0,"AP"===l.currency?-l.amount:0)})):void console.warn("Insufficient funds to buy plot"):void console.warn("No more plots available for purchase")},plantSeed:(e,t)=>{C(l=>{let a=l.plots.find(t=>t.slotIndex===e);if(!a)return l;let s=function(e,t){let l=(0,r.mT)(e);if(!l||"seed"!==l.metadata.type)throw Error("Seed ".concat(e," does not have a config defined."));let a={...l,growDuration:l.metadata.growDuration,yield:l.metadata.yield},s=(null==t?void 0:t.growthMultiplier)||1,n=a.growDuration*s,i=new Date(Date.now()+1e3*n);return{growDuration:n,endsAt:i,seedCost:{key:e,quantity:1}}}(t,d(a,new Date)),n=T(l.plots,e,{seed:{key:t,appliedAt:new Date,endsAt:s.endsAt}}),i=E(l.items,[{key:t,quantityChange:-1}]);return{...l,plots:n,items:i}}),v(e,t).catch(e=>{k(e,"plantSeed")})},applyModifier:(e,t)=>{C(l=>{var a,s;let n=l.plots.find(t=>t.slotIndex===e);if(!n)return l;let i=new Date;if((null==(a=n.modifier)?void 0:a.endsAt)&&i<n.modifier.endsAt)return console.warn("Plot ".concat(e," already has an active modifier")),l;let o=function(e,t){let l,a=(0,r.mT)(e);if(!a||"modifier"!==a.metadata.type)throw Error("Modifier ".concat(e," does not have a config defined."));let s={...a,growthMultiplier:a.metadata.growthMultiplier,yieldMultiplier:a.metadata.yieldMultiplier,duration:a.metadata.duration},n=Date.now(),i=new Date(n+1e3*s.duration);if(t){let e=(t.getTime()-n)*s.growthMultiplier;l=new Date(n+e)}return{modifierDuration:s.duration,endsAt:i,updatedSeedEndsAt:l,modifierCost:{key:e,quantity:1}}}(t,null==(s=n.seed)?void 0:s.endsAt),c=o.updatedSeedEndsAt&&n.seed?{...n.seed,endsAt:o.updatedSeedEndsAt}:n.seed,d=T(l.plots,e,{seed:c,modifier:{key:t,appliedAt:new Date,endsAt:o.endsAt}}),u=E(l.items,[{key:t,quantityChange:-1}]);return{...l,plots:d,items:u}}),y(e,t).catch(e=>{k(e,"applyModifier")})},harvestPlot:e=>{let t={currency:{amount:0,currency:"coins"},xp:0};return C(l=>{var a,s;let i=l.plots.find(t=>t.slotIndex===e);if(!i)return l;let o=new Date;if(!function(e,t){var l,a;return!!((null==(l=e.seed)?void 0:l.key)&&(null==(a=e.seed)?void 0:a.endsAt)&&t>=e.seed.endsAt)}(i,o))return console.warn("Plot ".concat(e," seed is not ready to harvest.")),l;let u=null==(a=i.seed)?void 0:a.key;if(!u)return l;let x=function(e,t,l){let a=(0,r.mT)(e);if(!a||"seed"!==a.metadata.type)throw Error("Seed ".concat(e," does not have a config defined."));let s={...a,growDuration:a.metadata.growDuration,yield:a.metadata.yield},i=1;t&&(!t.yieldCurrencyRestriction||t.yieldCurrencyRestriction===s.yield.currency)&&(i=t.yieldMultiplier);let o=i*("AP"===s.yield.currency?(0,n.mA)(null!=l?l:null):1),d=s.yield.amount*o,u={amount:d,currency:s.yield.currency},x=(0,c.Wm)(u);return{currency:u,xp:x,coinsGained:"coins"===s.yield.currency?d:0,apGained:"AP"===s.yield.currency?d:0}}(u,d(i,o),null!=(s=l.prestigeLevel)?s:null),m=T(l.plots,e,{seed:void 0});return t.currency=x.currency,t.xp=x.xp,A({...l,plots:m,xp:l.xp+x.xp},x.coinsGained,x.apGained)}),g(e).catch(e=>{k(e,"harvest")}),t},collectFarmhouse:()=>{w.mutate(),C(e=>{let t=new Date,l=60*s.O.cooldownHours*6e4,a=new Date(t.getTime()-l);return e.lastFarmhouseAt&&new Date(e.lastFarmhouseAt)>a?e:A({...e,lastFarmhouseAt:t},s.O.coinsPerDay)})},prestige:()=>{N.mutate()},query:p},children:l})},h=()=>{let e=(0,o.useContext)(x);if(!e)throw Error("useGameState must be used within a GameStateProvider");return e}},62523:(e,t,l)=>{l.d(t,{p:()=>r});var a=l(95155);l(12115);var s=l(59434);function r(e){let{className:t,type:l,...r}=e;return(0,a.jsx)("input",{type:l,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}},63366:(e,t,l)=>{l.d(t,{i:()=>r,l:()=>n});var a=l(76106);let s=null;function r(e){s=e}function n(){return()=>e=>{let{next:t,op:l}=e;return(0,a.sH)(e=>{let a=()=>new Promise((e,a)=>{t(l).subscribe({next:t=>e(t),error:e=>a(e),complete:()=>{}})});return t(l).subscribe({next:t=>e.next(t),error:t=>{s&&s(t,a)||e.error(t)},complete:()=>e.complete()})})}}},70215:(e,t,l)=>{l.d(t,{U:()=>s});var a=l(12115);let s=(e,t)=>{let[l,s]=(0,a.useState)(()=>{let l=localStorage.getItem(e);return l?JSON.parse(l):t});return(0,a.useEffect)(()=>{localStorage.setItem(e,JSON.stringify(l))},[e,l]),[l,s]}},72352:(e,t,l)=>{l.d(t,{y:()=>r});var a=l(95155),s=l(59434);let r=e=>{let{className:t}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:(0,s.cn)("animate-spin",t),children:(0,a.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})}},72817:(e,t,l)=>{function a(e,t){return"seed"in e&&e.seed?t>=e.seed.endsAt?"readyToHarvest":"growing":"seedKey"in e&&e.seedKey&&e.seedEndsAt?t>=e.seedEndsAt?"readyToHarvest":"growing":"idle"}function s(e,t){var l,a;if("seed"in e&&(null==(l=e.seed)?void 0:l.appliedAt)&&(null==(a=e.seed)?void 0:a.endsAt)){let l=e.seed.endsAt.getTime()-e.seed.appliedAt.getTime();return Math.min(Math.max((t.getTime()-e.seed.appliedAt.getTime())/l,0),1)}if("seedKey"in e&&e.seedAppliedAt&&e.seedEndsAt){let l=e.seedEndsAt.getTime()-e.seedAppliedAt.getTime();return Math.min(Math.max((t.getTime()-e.seedAppliedAt.getTime())/l,0),1)}return 0}function r(e){return({0:{amount:0,currency:"coins"},1:{amount:25,currency:"coins"},2:{amount:100,currency:"coins"},3:{amount:500,currency:"coins"},4:{amount:300,currency:"AP"},5:{amount:1e3,currency:"AP"},6:{amount:2500,currency:"coins"},7:{amount:2500,currency:"AP"},8:{amount:1e4,currency:"coins"},9:{amount:5e3,currency:"AP"},10:{amount:25e3,currency:"coins"},11:{amount:15e3,currency:"AP"}})[e]||void 0}l.d(t,{BM:()=>a,EM:()=>r,YL:()=>s})},73844:(e,t,l)=>{l.d(t,{ClientOnly:()=>r});var a=l(95155),s=l(12115);let r=e=>{let{children:t}=e,[l,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{r(!0)},[]),(0,a.jsx)(a.Fragment,{children:l?t:null})}},84155:(e,t,l)=>{l.d(t,{g:()=>s});var a=l(95155);let s=e=>{let{title:t,quantity:l}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-left text-sm",children:t}),(0,a.jsxs)("span",{className:"text-black/60 text-xs",children:["x",l]})]})}},87020:(e,t,l)=>{l.d(t,{O:()=>a});let a=function(){let e={};return{on(t,l){e[t]=(e[t]||[]).concat(l)},off(t,l){e[t]=(e[t]||[]).filter(e=>e!==l)},emit(t,l){for(let a of e[t]||[])a(l)}}}()},89885:(e,t,l)=>{l.d(t,{j:()=>s});var a=l(12115);let s=()=>{let[e,t]=(0,a.useState)(!1);return{open:e,onOpen:()=>t(!0),onClose:()=>t(!1),onToggle:()=>t(e=>!e),set:t,onOpenChange:e=>t(e)}}},90484:(e,t,l)=>{l.d(t,{_:()=>n});var a=l(84600),s=l(70927),r=l(49509);let n=(0,a.w)({server:{DATABASE_URL:s.Yj().url(),NODE_ENV:s.k5(["development","test","production"]).default("development"),THIRDWEB_SECRET_KEY:s.Yj(),RECAPTCHA_SECRET_KEY:s.Yj().optional()},client:{NEXT_PUBLIC_THIRDWEB_CLIENT_ID:s.Yj(),NEXT_PUBLIC_CHAIN:s.k5(["mainnet","testnet"]).default("mainnet"),NEXT_PUBLIC_ENABLE_CHEATS:s.Yj().optional()},runtimeEnv:{DATABASE_URL:r.env.DATABASE_URL,NODE_ENV:"production",THIRDWEB_SECRET_KEY:r.env.THIRDWEB_SECRET_KEY,NEXT_PUBLIC_THIRDWEB_CLIENT_ID:"c3aa533ba2d5c32dbdc321ca2defb2e9",NEXT_PUBLIC_CHAIN:"mainnet",NEXT_PUBLIC_ENABLE_CHEATS:r.env.NEXT_PUBLIC_ENABLE_CHEATS,RECAPTCHA_SECRET_KEY:r.env.RECAPTCHA_SECRET_KEY},skipValidation:!!r.env.SKIP_ENV_VALIDATION,emptyStringAsUndefined:!0})},92101:(e,t,l)=>{l.d(t,{HudDialogsProvider:()=>e7,I:()=>te});var a=l(95155),s=l(89885),r=l(12115),n=l(54165),i=l(15452),o=l(30285),c=l(17313),d=l(30888),u=l(49353),x=l(17580),m=l(18186),h=l(58071),f=l(47121);let p=()=>{let{data:e,isLoading:t}=f.F.stats.getLeaderboard.useQuery(),[l,s]=(0,r.useState)("totalApEarned");if(t)return(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col overflow-hidden",children:(0,a.jsxs)("div",{className:"pixel-scrollbar flex-1 overflow-y-auto px-2 pt-[20px] pb-[130px]",children:[(0,a.jsx)("h1",{className:"mb-4 text-center font-bold text-2xl text-black",children:"Leaderboard"}),(0,a.jsxs)("div",{className:"mb-4 flex rounded-lg bg-gray-200 p-1",children:[(0,a.jsx)("div",{className:"h-8 w-1/2 animate-pulse rounded bg-gray-300"}),(0,a.jsx)("div",{className:"h-8 w-1/2 animate-pulse rounded bg-gray-300"})]}),(0,a.jsx)("div",{className:"mb-6 animate-pulse rounded-lg border-2 border-gray-300 bg-gray-100 p-3",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-2 h-6 w-24 rounded bg-gray-300"}),(0,a.jsx)("div",{className:"mx-auto mb-1 h-8 w-16 rounded bg-gray-300"}),(0,a.jsx)("div",{className:"mx-auto h-4 w-20 rounded bg-gray-300"})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"mb-3 h-6 w-32 animate-pulse rounded bg-gray-300"}),Array.from({length:8}).map((e,t)=>(0,a.jsx)("div",{className:"flex animate-pulse items-center justify-between rounded-lg border bg-gray-100 p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-300"}),(0,a.jsx)("div",{className:"h-4 w-32 rounded bg-gray-300"})]})},t))]})]})});if(!e)return(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col overflow-hidden",children:(0,a.jsxs)("div",{className:"pixel-scrollbar flex-1 overflow-y-auto px-2 pt-[20px] pb-[130px]",children:[(0,a.jsx)("h1",{className:"mb-4 text-center font-bold text-2xl text-black",children:"Leaderboard"}),(0,a.jsx)("div",{className:"text-center text-black",children:"Failed to load leaderboard"})]})});let n=e[l];return(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col overflow-hidden",children:(0,a.jsxs)("div",{className:"pixel-scrollbar flex-1 overflow-y-auto px-2 pt-[20px] pb-[130px]",children:[(0,a.jsx)("h1",{className:"mb-4 text-center font-bold text-2xl text-black",children:"Leaderboard"}),(0,a.jsxs)("div",{className:"mb-4 flex rounded-lg bg-gray-200 p-1",children:[(0,a.jsx)("button",{type:"button",onClick:()=>s("totalApEarned"),className:"flex-1 rounded-md px-3 py-2 font-medium text-sm transition-colors ".concat("totalApEarned"===l?"bg-white text-blue-600 shadow-sm":"text-gray-700 hover:bg-gray-300"),children:"Total AP Earned"}),(0,a.jsx)("button",{type:"button",onClick:()=>s("currentAp"),className:"flex-1 rounded-md px-3 py-2 font-medium text-sm transition-colors ".concat("currentAp"===l?"bg-white text-blue-600 shadow-sm":"text-gray-700 hover:bg-gray-300"),children:"Current AP"})]}),(0,a.jsx)("div",{className:"mb-6 rounded-lg border-2 border-yellow-500 bg-yellow-100 p-3",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-bold text-black text-lg",children:"You:"}),(0,a.jsxs)("div",{className:"font-bold text-2xl text-yellow-700",children:["#",n.currentUserRank]}),(0,a.jsxs)("div",{className:"text-gray-700 text-sm",children:[n.currentUserValue," ","totalApEarned"===l?"AP Earned":"Current AP"]})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"mb-3 font-bold text-black text-lg",children:"Top 20 Players"}),n.topUsers.map(e=>(0,a.jsx)("div",{className:"flex items-center justify-between rounded-lg border bg-white p-3 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-500 font-bold text-sm text-white",children:e.rank}),(0,a.jsx)("div",{className:"font-mono text-black text-sm",children:(e=>e.length<=10?e:"".concat(e.slice(0,10),"...").concat(e.slice(-10)))(e.walletAddress)})]})},e.walletAddress))]})]})})};var g=l(59434),v=l(46671),y=l(56671);let b=(0,r.createContext)({}),j=e=>{var t,l,s;let{taskKey:n,initialStatus:i,children:o,config:c,className:d}=e,u=f.F.useUtils(),x=f.F.tasks.claimReward.useMutation({onSuccess:()=>{u.core.getState.invalidate()}}),m=f.F.tasks.validate.useMutation({onError:e=>{y.o.error("Validation failed: ".concat(e.message),{id:"task-validate-".concat(n)})}}),h=e=>m.mutate({key:n,params:e}),p=(null==(t=x.data)?void 0:t.success)?v.TaskStatus.CLAIMED:null!=(s=null==(l=m.data)?void 0:l.status)?s:i;return(0,r.useEffect)(()=>{c.automaticallValidate&&p===v.TaskStatus.INCOMPLETE&&h()},[c.automaticallValidate]),(0,a.jsx)(b.Provider,{value:{taskKey:n,status:p,claim:()=>x.mutate({key:n}),validate:h,isLoadingClaim:x.isPending,isLoadingValidate:m.isPending,config:c},children:(0,a.jsx)("div",{className:(0,g.cn)("dark flex w-full flex-col gap-4 rounded bg-black/80 p-3 text-foreground",{"animate-pulse":x.isPending||m.isPending,"border-2 border-green-500":p===v.TaskStatus.CLAIMED},d),children:o})})},w=()=>{let e=(0,r.useContext)(b);if(!e)throw Error("useTaskCard must be used within a TaskCardRoot");return e},N={followApplevillexyz:{key:"followApplevillexyz",rewardCurrency:{amount:500,currency:"AP"},automaticallValidate:!1,tags:["social"]},joinApplevilleTelegram:{key:"joinApplevilleTelegram",rewardCurrency:{amount:500,currency:"AP"},automaticallValidate:!1,tags:["social"]},followEtherlink:{key:"followEtherlink",rewardCurrency:{amount:300,currency:"AP"},automaticallValidate:!1,tags:["social"]},followReaperactualw3:{key:"followReaperactualw3",rewardCurrency:{amount:777,currency:"AP"},automaticallValidate:!1,tags:["social"]},shareFarmOnX:{key:"shareFarmOnX",rewardCurrency:{amount:300,currency:"AP"},automaticallValidate:!1,tags:["social"]},connectRewardWallet:{key:"connectRewardWallet",rewardCurrency:{amount:300,currency:"AP"},automaticallValidate:!1,tags:["social"]},connectEOAWallet:{key:"connectEOAWallet",rewardCurrency:{amount:300,currency:"AP"},automaticallValidate:!1,tags:["social"]},"first-friend":{key:"first-friend",rewardCurrency:[{amount:500,currency:"AP"},{amount:2e3,currency:"coins"}],automaticallValidate:!0,tags:["referral"],metadata:{numberOfReferrals:1,minLevelOfReferrals:5}},"network-builder":{key:"network-builder",rewardCurrency:[{amount:2e3,currency:"AP"},{amount:5e3,currency:"coins"}],automaticallValidate:!0,tags:["referral"],metadata:{numberOfReferrals:5,minLevelOfReferrals:10}},"community-leader":{key:"community-leader",rewardCurrency:{amount:8e3,currency:"AP"},automaticallValidate:!0,tags:["referral"],metadata:{numberOfReferrals:15,minLevelOfReferrals:15}},influencer:{key:"influencer",rewardCurrency:{amount:25e3,currency:"AP"},automaticallValidate:!0,tags:["referral"],metadata:{numberOfReferrals:50,minLevelOfReferrals:15}}};var k=l(73599),C=l(72352);let A=()=>{let{status:e,claim:t,config:l,isLoadingClaim:s}=w();return s?(0,a.jsxs)(o.$,{className:"w-full bg-brand font-semibold text-black",disabled:!0,children:[(0,a.jsx)(C.y,{className:"mr-2 h-4 w-4"}),"CLAIMING..."]}):(0,a.jsxs)(o.$,{className:"w-full bg-brand font-semibold text-black disabled:bg-white/10",disabled:e!==v.TaskStatus.READY_FOR_CLAIM,onClick:()=>t(),children:["CLAIM ",(0,a.jsx)(k.S,{amount:l.rewardCurrency})]})};var E=l(5196);let T=e=>{let{children:t,className:l}=e;return(0,a.jsx)("div",{className:(0,g.cn)("text-muted-foreground text-sm",l),children:t})},S=e=>{let{children:t,className:l}=e;return(0,a.jsx)("div",{className:(0,g.cn)("font-semibold text-md ",l),children:t})},P=e=>{let{title:t,description:l,actions:s,showDescriptionAlways:r=!1}=e,{status:n,config:i}=w();return(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)(S,{children:t}),(r||n!==v.TaskStatus.CLAIMED)&&l&&(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(T,{children:l})})]}),(0,a.jsx)("div",{className:"flex-shrink-0",children:n===v.TaskStatus.CLAIMED?(0,a.jsxs)("div",{className:"flex items-center gap-1 text-green-500",children:[(0,a.jsx)(E.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-medium text-sm",children:"Claimed"})]}):(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-muted-foreground text-xs",children:"Reward"}),(0,a.jsx)("div",{className:"font-semibold text-brand",children:(0,a.jsx)(k.S,{amount:i.rewardCurrency})})]})})]}),s&&n!==v.TaskStatus.CLAIMED&&(0,a.jsx)("div",{className:"flex flex-col gap-2",children:s})]})},L=()=>{let{status:e,claim:t,config:l,isLoadingClaim:s,isLoadingValidate:r}=w();return s||r?(0,a.jsx)("div",{className:"text-5xl",children:(0,a.jsx)(C.y,{})}):e?(0,a.jsx)("div",{className:"text-5xl",children:e===v.TaskStatus.CLAIMED?(0,a.jsx)(E.A,{className:"text-green-500"}):(0,a.jsxs)(o.$,{variant:"default",className:"w-full bg-brand text-black",disabled:e!==v.TaskStatus.READY_FOR_CLAIM,onClick:()=>{t()},children:["CLAIM ",(0,a.jsx)(k.S,{amount:l.rewardCurrency})]})}):(console.warn("couldnt load task status"),(0,a.jsx)("div",{className:"text-5xl",children:(0,a.jsx)(C.y,{})}))};var D=l(62523),I=l(6874),M=l.n(I),R=l(70215),_=l(33786);let O=e=>{let{title:t,description:l,socialUrl:s,socialButtonText:n,showUsernameInput:i=!0,inputPlaceholder:c="enter username",step1Label:d="Step 1",step2Label:u="Step 2: Validate Username"}=e,{status:x,validate:m,isLoadingValidate:h}=w(),[f,p]=(0,r.useState)(""),[y,b]=(0,R.U)("social-".concat(s,"-clicked"),!1),j=!i||f.trim().length>0,N=(0,a.jsxs)("div",{className:"space-y-3",children:[x===v.TaskStatus.INCOMPLETE&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:(0,g.cn)("font-medium text-muted-foreground text-xs uppercase tracking-wide",{"text-brand":!y}),children:d}),(0,a.jsxs)(o.$,{className:"w-full font-semibold",variant:"outline",onClick:()=>{window.open(s,"_blank"),b(!0)},children:[n,(0,a.jsx)(_.A,{className:"ml-2 h-4 w-4"})]})]}),i&&x===v.TaskStatus.INCOMPLETE&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs uppercase ".concat(y?"text-brand":"text-muted-foreground"),children:u}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D.p,{placeholder:c,disabled:h||!y,value:f,onChange:e=>p(e.target.value),className:y?"border-brand":"",required:!0}),(0,a.jsx)(o.$,{className:"w-full font-semibold ".concat(y?"bg-brand":"bg-white/10"," disabled:!bg-[bg-white/10]"),disabled:h||!j||!y,onClick:()=>m({username:f}),children:y?h?"VALIDATING...":"VALIDATE":"COMPLETE STEP 1 FIRST"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"font-medium text-muted-foreground text-xs uppercase tracking-wide",children:[x===v.TaskStatus.INCOMPLETE?"Step 3":"",x===v.TaskStatus.READY_FOR_CLAIM?"Ready to Claim":""]}),(0,a.jsx)(A,{})]})]});return(0,a.jsx)(P,{title:t,description:l,actions:N})},F=e=>{let{level:t}=e;return(0,a.jsx)(P,{title:"Reach Level ".concat(t),description:"Farm enough XP to get to level ".concat(t),actions:(0,a.jsx)(A,{})})},z=e=>{let{taskKey:t}=e,{config:l}=w();return l&&l.metadata?(0,a.jsx)(P,{title:(e=>({"first-friend":"First Friend","network-builder":"Network Builder","community-leader":"Community Leader",influencer:"Influencer"})[e]||e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()))(t),description:"Have ".concat(l.metadata.numberOfReferrals," referral").concat(l.metadata.numberOfReferrals>1?"s":""," reach Lv ").concat(l.metadata.minLevelOfReferrals),actions:(0,a.jsx)(A,{})}):null},H={follow:{card:(0,a.jsx)(()=>{let{status:e,validate:t,isLoadingValidate:l}=w();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-1",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(S,{children:"Follow us on X"}),e===v.TaskStatus.INCOMPLETE&&(0,a.jsxs)(T,{children:["Follow"," ",(0,a.jsx)(M(),{href:"https://x.com/etherlink",target:"_blank",className:"underline",children:"@etherlink"})," ","on X, then validate with your username below to claim the reward"]})]}),(0,a.jsx)(L,{})]}),e===v.TaskStatus.INCOMPLETE&&(0,a.jsxs)("div",{className:"light flex flex-row items-center gap-2",children:[(0,a.jsx)(D.p,{placeholder:"enter username",disabled:l}),(0,a.jsx)(o.$,{className:"flex-1",disabled:l,onClick:()=>{t()},children:"validate"})]})]})},{})},followEtherlink:{card:(0,a.jsx)(()=>(0,a.jsx)(O,{title:"Follow @Etherlink on X",description:"Follow @etherlink on X and validate your username to claim the reward",socialUrl:"https://x.com/etherlink",socialButtonText:"FOLLOW ON X",inputPlaceholder:"enter X username"}),{})},followApplevillexyz:{card:(0,a.jsx)(()=>(0,a.jsx)(O,{title:"Follow @appleville_xyz",description:"Follow @appleville_xyz on X and validate your username to get the reward",socialUrl:"https://x.com/appleville_xyz",socialButtonText:"FOLLOW ON X",inputPlaceholder:"enter X username"}),{})},shareFarmOnX:{card:(0,a.jsx)(()=>{let{data:e}=f.F.referral.getReferralCode.useQuery(),t=e?"".concat(window.location.origin,"?ref=").concat(e):window.location.origin,l=encodeURIComponent("Join me in @appleville_xyz \uD83C\uDF31 ".concat(t," #AppleVille #IdleFarming"));return(0,a.jsx)(O,{title:"Share referral link on X",description:"Share your referral link on X to invite friends to your farm and validate with your post URL to claim the reward",socialUrl:"https://x.com/intent/tweet?text=".concat(l),socialButtonText:"SHARE ON X",step2Label:"Step 2: Validate Post URL",inputPlaceholder:"enter post URL"})},{})},joinApplevilleTelegram:{card:(0,a.jsx)(()=>(0,a.jsx)(O,{title:"Join Appleville Telegram",description:"Join the Appleville Telegram community and validate your username to claim the reward",socialUrl:"https://t.me/appleville_xyz",socialButtonText:"JOIN TELEGRAM",inputPlaceholder:"enter telegram username"}),{})},example:{card:(0,a.jsx)(()=>{let{status:e,validate:t,isLoadingValidate:l}=w(),s=(0,a.jsxs)(a.Fragment,{children:[e===v.TaskStatus.INCOMPLETE&&(0,a.jsx)(o.$,{className:"w-full font-semibold",disabled:l,onClick:()=>t(),children:l?"VALIDATING...":"VALIDATE"}),(0,a.jsx)(A,{})]});return(0,a.jsx)(P,{title:"Example Task",description:"Literally click validate",actions:s})},{})},levelA:{card:(0,a.jsx)(F,{level:3})},levelB:{card:(0,a.jsx)(F,{level:5})},"first-friend":{card:(0,a.jsx)(z,{taskKey:"first-friend"})},"network-builder":{card:(0,a.jsx)(z,{taskKey:"network-builder"})},"community-leader":{card:(0,a.jsx)(z,{taskKey:"community-leader"})},influencer:{card:(0,a.jsx)(z,{taskKey:"influencer"})},connectRewardWallet:{card:(0,a.jsx)(()=>{let{profile:e}=te(),{status:t,validate:l,isLoadingValidate:s}=w(),r=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.$,{className:"w-full font-semibold",onClick:()=>e.onOpen(),disabled:s||t===v.TaskStatus.CLAIMED||t===v.TaskStatus.READY_FOR_CLAIM,children:"OPEN PROFILE"}),(0,a.jsx)(o.$,{className:"w-full font-semibold",onClick:()=>l(),disabled:s||t===v.TaskStatus.CLAIMED||t===v.TaskStatus.READY_FOR_CLAIM,children:"VALIDATE"}),(0,a.jsx)(A,{})]});return(0,a.jsx)(P,{title:"Connect Reward Wallet",description:"Connect a reward wallet in your profile to ensure you get your rewards",actions:r})},{})},followReaperactualw3:{card:(0,a.jsx)(O,{title:"Follow @reaperactualw3",description:"Follow @reaperactualw3 on X and validate your username to get the reward",socialUrl:"https://x.com/reaperactualw3",socialButtonText:"FOLLOW ON X",inputPlaceholder:"enter X username"})}},B=e=>e in H?H[e]:(console.warn('No content found for task key "'.concat(e,'"')),null);var W=l(49554);let U=()=>{var e;let{data:t}=f.F.referral.getReferralCode.useQuery(),l=f.F.tasks.list.useQuery(),{data:s}=f.F.referral.getReferrerInfo.useQuery(),{data:n}=f.F.referral.getReferralStats.useQuery(),[i,o]=(0,r.useState)(!1),c=t?"".concat(window.location.origin,"?ref=").concat(t):"",d=Object.values(N).filter(e=>{var t;return null==(t=e.tags)?void 0:t.includes("referral")}),u=async()=>{o(!0),await navigator.clipboard.writeText(c),y.o.success("Referral link copied!"),setTimeout(()=>o(!1),1500)};return(0,a.jsxs)("div",{className:(0,g.cn)("text-black"),children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"mb-2 font-bold text-lg",children:"Refer a Farmer"}),(0,a.jsx)("p",{className:"mb-4 text-sm",children:"Share your referral link to boost your rewards!"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",readOnly:!0,value:c,className:"w-full rounded-md border px-3 py-2 text-sm"}),(0,a.jsx)("button",{onClick:u,className:"rounded-md bg-blue-500 px-3 py-2 text-sm text-white hover:bg-blue-600",type:"button",disabled:i,children:i?"Copied!":"Copy"})]}),s&&(0,a.jsxs)("div",{className:"mt-3 text-center text-gray-600 text-xs",children:["You were referred by: ",s.walletAddress]})]}),d.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"mb-3 font-bold text-lg",children:"Referral Tasks"}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:d.map(e=>{var t;let s=B(e.key),r=null==(t=l.data)?void 0:t.find(t=>t.config.key===e.key);return s?(0,a.jsx)(j,{taskKey:e.key,initialStatus:null==r?void 0:r.status,config:e,children:s.card},e.key):null})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"mb-3 font-bold text-lg",children:["Your Referrals (",null!=(e=null==n?void 0:n.totalReferrals)?e:0,")"]}),(null==n?void 0:n.detailedReferrals.length)?(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:n.detailedReferrals.map(e=>(0,a.jsxs)("div",{className:"rounded bg-black/80 p-3 text-white",children:[(0,a.jsxs)("p",{className:"font-bold text-xs",children:["Wallet: ",e.walletAddress.slice(0,6),"...",e.walletAddress.slice(-4)]}),(0,a.jsxs)("p",{className:"text-xs",children:["Level: ",e.level]}),(0,a.jsx)("div",{className:"mt-2 h-2 w-full rounded-full bg-gray-700",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-green-500",style:{width:"".concat(Math.min(e.xp/(0,W.kr)(5)*100,100),"%")}})})]},e.walletAddress))}):(0,a.jsx)("div",{className:"flex min-h-[100px] items-center justify-center text-black/60 text-sm",children:"No referrals yet. Share your link to get started!"})]})]})},V=()=>(0,a.jsxs)("div",{className:"text-black",children:[(0,a.jsx)("div",{className:"mb-4 rounded-lg border-2 border-green-400 bg-green-50 p-3",children:(0,a.jsxs)("p",{className:"font-semibold text-sm text-green-800",children:["\uD83C\uDF89 ",(0,a.jsx)("strong",{children:"Get ready for Season 1 harvest!"})," Build your farm, climb the leaderboards, and claim your $WXTZ!"]})}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-3",children:[(0,a.jsx)("h3",{className:"mb-2 font-bold text-base",children:"Season Overview"}),(0,a.jsxs)("ul",{className:"list-disc space-y-1 pl-5",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Total Prize Pool:"})," $50,000"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Season End:"})," November 14th, 2025"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"How to Win:"})," Your final rank is determined by your Current AP Held at the exact moment the season ends. A snapshot of the leaderboards will be taken to lock in the final rankings."]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-3",children:[(0,a.jsx)("h3",{className:"mb-2 font-bold text-base",children:"\uD83C\uDFC6 Prize Tiers"}),(0,a.jsxs)("p",{className:"mb-3 text-sm text-green-700",children:[(0,a.jsx)("strong",{children:"The more AP you hold, the bigger your rewards!"})," Top players earn the most, but everyone has a chance to climb the ranks."]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"rounded-md border border-purple-200 bg-purple-50 p-3",children:[(0,a.jsx)("div",{className:"font-bold text-purple-800",children:"\uD83D\uDC8E Diamond"}),(0,a.jsx)("div",{className:"text-purple-600 text-xs",children:"Top 0.03% of players"})]}),(0,a.jsxs)("div",{className:"rounded-md border border-gray-300 bg-gray-50 p-3",children:[(0,a.jsx)("div",{className:"font-bold text-gray-800",children:"\uD83E\uDD48 Platinum"}),(0,a.jsx)("div",{className:"text-gray-600 text-xs",children:"Next 0.25% of players"})]}),(0,a.jsxs)("div",{className:"rounded-md border border-yellow-300 bg-yellow-50 p-3",children:[(0,a.jsx)("div",{className:"font-bold text-yellow-800",children:"\uD83E\uDD47 Gold"}),(0,a.jsx)("div",{className:"text-yellow-600 text-xs",children:"Next 1% of players"})]}),(0,a.jsxs)("div",{className:"rounded-md border border-gray-400 bg-gray-100 p-3",children:[(0,a.jsx)("div",{className:"font-bold text-gray-700",children:"\uD83E\uDD49 Silver"}),(0,a.jsx)("div",{className:"text-gray-600 text-xs",children:"Next 1.25% of players"})]})]}),(0,a.jsx)("div",{className:"mt-3 rounded-md bg-green-50 border border-green-200 p-3",children:(0,a.jsxs)("p",{className:"text-sm text-green-700",children:["\uD83D\uDE80 ",(0,a.jsx)("strong",{children:"Keep growing your AP!"})," The season isn't over yet - every apple you harvest gets you for future expansion and prizes!"]})})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-3",children:[(0,a.jsx)("h3",{className:"mb-2 font-bold text-base",children:"\uD83D\uDCB0 Reward Token: $WXTZ"}),(0,a.jsx)("div",{className:"rounded-md bg-green-50 border border-green-200 p-3",children:(0,a.jsxs)("p",{className:"text-sm text-green-700",children:[(0,a.jsx)("strong",{})," Win $WXTZ tokens (1 WXTZ = 1 XTZ) - no vesting, no waiting! Claim your rewards instantly on applefarm.xyz with your connected Reward Wallet."]})})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-3",children:[(0,a.jsx)("h3",{className:"mb-2 font-bold text-base",children:"\uD83C\uDF81 How to Claim Your Rewards"}),(0,a.jsxs)("div",{className:"rounded-md bg-blue-50 border border-blue-200 p-3",children:[(0,a.jsxs)("ol",{className:"list-decimal pl-4 text-sm space-y-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Connect your Reward Wallet"})," in game settings (do this now!)"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Keep playing"})," to maximize your AP before season ends"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Visit applefarm.xyz"})," after season ends to claim your $WXTZ instantly"]})]}),(0,a.jsxs)("p",{className:"mt-3 text-xs text-blue-700",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Pro tip:"})," Connect your wallet early so you're ready to claim!"]})]})]})]})]}),X=()=>{let e=f.F.tasks.list.useQuery(),t=Object.values(N).filter(e=>{var t;return null==(t=e.tags)?void 0:t.includes("social")}).sort((t,l)=>{var a,s,r,n;let i=null==(a=e.data)?void 0:a.find(e=>e.config.key===t.key),o=null==(s=e.data)?void 0:s.find(e=>e.config.key===l.key),c=null!=(r=null==i?void 0:i.status)?r:v.TaskStatus.INCOMPLETE,d=null!=(n=null==o?void 0:o.status)?n:v.TaskStatus.INCOMPLETE,u={[v.TaskStatus.INCOMPLETE]:0,[v.TaskStatus.READY_FOR_CLAIM]:1,[v.TaskStatus.CLAIMED]:2};return u[c]-u[d]});return(0,a.jsxs)("div",{className:"text-black",children:[(0,a.jsx)("p",{className:"mb-4 text-sm",children:"Complete the tasks to supercharge your rewards!"}),(0,a.jsx)("div",{className:(0,g.cn)("flex w-full flex-col gap-2"),children:t.map(t=>{var l;let s=B(t.key),r=null==(l=e.data)?void 0:l.find(e=>e.config.key===t.key);return s?(0,a.jsx)(j,{taskKey:t.key,initialStatus:null==r?void 0:r.status,config:t,children:s.card},t.key):null})})]})},q=()=>{let{earnAp:e}=te();return(0,a.jsxs)(c.tU,{defaultValue:"tasks",className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"translate-z-0 absolute bottom-0 z-20 m-0 flex w-full flex-col rounded-[0px] border-[#BD6629] border-t-2 bg-[#f5b76e] text-white",children:[(0,a.jsxs)(c.j7,{className:"h-[62px] w-full bg-[none]",children:[(0,a.jsxs)(c.Xi,{value:"tasks",className:"flex-1 flex-col text-[10px] transition-all",children:[(0,a.jsx)(u.A,{}),"Tasks"]}),(0,a.jsxs)(c.Xi,{value:"referrals",className:"flex-1 flex-col text-[10px] transition-all",children:[(0,a.jsx)(x.A,{}),"Referrals"]}),(0,a.jsxs)(c.Xi,{value:"leaderboard",className:"flex-1 flex-col text-[10px] transition-all",children:[(0,a.jsx)(m.A,{}),"Leaderboards"]}),(0,a.jsxs)(c.Xi,{value:"rules",className:"flex-1 flex-col text-[10px] transition-all",children:[(0,a.jsx)(h.A,{}),"Rules"]})]}),(0,a.jsx)("div",{className:"w-full p-2",children:(0,a.jsx)(o.$,{className:"w-full bg-green-600 hover:bg-green-500",onClick:()=>{e.onClose()},children:"DONE"})})]}),(0,a.jsx)(d.av,{value:"tasks",className:"flex h-full flex-col",children:(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col overflow-hidden",children:(0,a.jsxs)("div",{className:"pixel-scrollbar flex-1 overflow-y-auto px-2 pt-[20px] pb-[130px]",children:[(0,a.jsx)("h1",{className:"mb-4 text-center font-bold text-2xl text-black",children:"Tasks"}),(0,a.jsx)(X,{})]})})}),(0,a.jsx)(d.av,{value:"referrals",className:"flex h-full flex-col",children:(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col overflow-hidden",children:(0,a.jsxs)("div",{className:" pixel-scrollbar flex-1 overflow-y-auto px-2 pt-[20px] pb-[130px]",children:[(0,a.jsx)("h1",{className:"mb-4 text-center font-bold text-2xl text-black",children:"Referrals"}),(0,a.jsx)(U,{})]})})}),(0,a.jsx)(d.av,{value:"leaderboard",className:"flex h-full flex-col",children:(0,a.jsx)(p,{})}),(0,a.jsx)(d.av,{value:"rules",className:"flex h-full flex-col",children:(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col overflow-hidden",children:(0,a.jsxs)("div",{className:"pixel-scrollbar flex-1 overflow-y-auto px-2 pt-[20px] pb-[130px]",children:[(0,a.jsx)("h1",{className:"mb-4 text-center font-bold text-2xl text-black",children:"Rules"}),(0,a.jsx)(V,{})]})})})]})},Y=()=>{let{earnAp:e}=te();return(0,a.jsxs)(n.lG,{onOpenChange:e.set,open:e.open,children:[(0,a.jsx)(i.LC,{className:"opacity-0"}),(0,a.jsxs)(n.Cf,{className:"hud pixel-scrollbar h-[100%] max-w-[100%] overflow-y-auto p-0 sm:h-[800px] sm:max-h-[90vh] sm:max-w-[600px]",showCloseButton:!1,children:[(0,a.jsx)(n.L3,{className:"sr-only",children:"Earn AP"}),(0,a.jsx)(q,{})]})]})};var $=l(14217),G=l(87020),K=l(61520);function Q(){let{open:e,onOpenChange:t}=te().farmhouse,{collectFarmhouse:l,state:s}=(0,K.v)(),[i,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!(null==s?void 0:s.lastFarmhouseAt))return void c(null);let e=()=>{let e=new Date,t=new Date(s.lastFarmhouseAt||new Date(0)),l=60*$.O.cooldownHours*6e4,a=new Date(t.getTime()+l);e>=a?c(null):c(Math.ceil((a.getTime()-e.getTime())/36e5))};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[null==s?void 0:s.lastFarmhouseAt]);let d=null!==i&&i>0;return(0,a.jsx)(n.lG,{open:e,onOpenChange:t,children:(0,a.jsxs)(n.Cf,{showCloseButton:!1,className:"dark border-2 border-border bg-card",children:[(0,a.jsxs)(n.c7,{children:[(0,a.jsx)(n.L3,{className:"text-center text-2xl text-white",children:"Visit the Farmhouse! \uD83C\uDFE1"}),(0,a.jsx)(n.rr,{className:"text-center text-base",children:d?"You've already collected from the farmhouse recently. You can collect again in ".concat(i," hour").concat(1!==i?"s":"","."):"Collect ".concat($.O.coinsPerDay," coins from your farmhouse! You can do this once every ").concat($.O.cooldownHours," hours.")})]}),(0,a.jsx)(n.Es,{className:"justify-center",children:(0,a.jsx)(o.$,{onClick:e=>{if(null!==i)return;let a={x:e.clientX,y:e.clientY};G.O.emit("coins-explode",{...a,quantity:$.O.coinsPerDay}),l(),t(!1)},size:"lg",className:"w-full",disabled:d,children:d?"Wait ".concat(i," hour").concat(1!==i?"s":""):"Get ".concat($.O.coinsPerDay," coins")})})]})})}var J=l(37108),Z=l(71539),ee=l(18573),et=l(34865),el=l(27809),ea=l(84155),es=l(96022),er=l(15960);let en=e=>{var t;let{item:l,config:s,onUse:r,enabled:n,isSelected:i,useButtonText:c="Use"}=e,{state:d}=(0,K.v)(),u=(null==d?void 0:d.items.length)===1&&1===d.numPlots,x=(0,et.jH)(s.key),m=r?(0,a.jsx)(o.$,{size:"sm",disabled:!n,onClick:r,className:(0,g.cn)("h-6 px-2 text-xs",{"glow-animate":u&&"seed"===s.metadata.type}),children:c}):null,h="seed"===s.metadata.type?"".concat(s.name," Seeds"):s.name;return(0,a.jsx)(er.G9,{title:(0,a.jsx)(ea.g,{title:h,quantity:l.quantity}),description:(0,a.jsx)(es.g,{config:s}),image:(0,a.jsx)(er.Dy,{src:null!=(t=x.pack)?t:"",alt:h,particleColor:x.particleColor}),rightSide:m,className:(0,g.cn)({"ring-2 ring-blue-500":i})})},ei=()=>{var e;let{state:t}=(0,K.v)(),{selectedItem:l,selectItem:s,clearSelection:n}=(0,ee.d)(),{inventory:i}=te(),c=(null==t||null==(e=t.items)?void 0:e.filter(e=>{var t;return(null==(t=(0,et.mT)(e.key))?void 0:t.metadata.type)==="modifier"}))||[];(0,r.useEffect)(()=>{if(!c.length)return;let e=c.find(e=>e.key===(null==l?void 0:l.key));e&&0!==e.quantity||n()},[c.length,l,n]);let d=te();return 0===c.length?(0,a.jsxs)("div",{className:"flex min-h-[200px] flex-col items-center justify-center gap-4 p-6 text-black/60",children:["No boosters in inventory",(0,a.jsxs)(o.$,{className:(0,g.cn)("w-full"),onClick:()=>{d.shop.onOpen()},children:[(0,a.jsx)(el.A,{})," OPEN SHOP"]})]}):(0,a.jsx)("div",{className:"flex flex-col",children:c.map(e=>{var t;let r=(0,et.mT)(e.key);if(!r||"modifier"!==r.metadata.type)return null;let n=(null==l?void 0:l.key)===e.key&&(null==(t=(0,et.mT)(l.key))?void 0:t.metadata.type)==="modifier",o=e.quantity>0;return(0,a.jsx)(en,{item:e,config:r,onUse:()=>{s(e),i.onClose()},enabled:o,isSelected:n,useButtonText:"Apply"},e.key)})})},eo=()=>{var e;let{state:t}=(0,K.v)(),{inventory:l}=te(),{selectedItem:s,selectItem:n,clearSelection:i}=(0,ee.d)(),c=te(),d=(null==t||null==(e=t.items)?void 0:e.filter(e=>{var t;return(null==(t=(0,et.mT)(e.key))?void 0:t.metadata.type)==="seed"}))||[];return((0,r.useEffect)(()=>{if(!d.length)return;let e=d.find(e=>e.key===(null==s?void 0:s.key));e&&0!==e.quantity||i()},[d.length,s,i]),0===d.length)?(0,a.jsxs)("div",{className:"flex min-h-[200px] flex-col items-center justify-center gap-4 p-6 text-black/60",children:["No seeds in inventory",(0,a.jsxs)(o.$,{className:(0,g.cn)("w-full"),onClick:()=>{c.shop.onOpen()},children:[(0,a.jsx)(el.A,{})," OPEN SHOP"]})]}):(0,a.jsx)("div",{className:"flex flex-col ",children:d.map(e=>{var t;let r=(0,et.mT)(e.key);if(!r||"seed"!==r.metadata.type)return null;let i=(null==s?void 0:s.key)===e.key&&(null==(t=(0,et.mT)(s.key))?void 0:t.metadata.type)==="seed",o=e.quantity>0;return(0,a.jsx)(en,{item:e,config:r,onUse:()=>{n(e),l.onClose()},enabled:o,isSelected:i,useButtonText:"Plant"},e.key)})})},ec=()=>{let{inventory:e}=te();return(0,a.jsxs)(c.tU,{defaultValue:"seeds",className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"translate-z-0 absolute bottom-0 z-20 m-0 flex w-full flex-col rounded-[0px] border-[#BD6629] border-t-2 bg-[#f5b76e] text-white",children:[(0,a.jsxs)(c.j7,{className:"h-[62px] w-full bg-[none]",children:[(0,a.jsxs)(c.Xi,{value:"seeds",className:"flex-1 flex-col text-[10px] transition-all",children:[(0,a.jsx)(J.A,{}),"Seeds"]}),(0,a.jsxs)(c.Xi,{value:"modifiers",className:"flex-1 flex-col text-[10px] transition-all",children:[(0,a.jsx)(Z.A,{}),"Boosters"]})]}),(0,a.jsx)("div",{className:"w-full p-2",children:(0,a.jsx)(o.$,{className:"w-full bg-green-600 hover:bg-green-500",onClick:()=>{e.onClose()},children:"DONE"})})]}),(0,a.jsx)(d.av,{value:"seeds",className:"flex h-full flex-col",children:(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col overflow-hidden",children:(0,a.jsx)("div",{className:"pixel-scrollbar flex-1 overflow-y-auto px-0 pb-[120px]",children:(0,a.jsx)(eo,{})})})}),(0,a.jsx)(d.av,{value:"modifiers",className:"flex h-full flex-col",children:(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col overflow-hidden",children:(0,a.jsx)("div",{className:"pixel-scrollbar flex-1 overflow-y-auto px-0 pb-[120px]",children:(0,a.jsx)(ei,{})})})})]})},ed=()=>{let{inventory:e}=te();return(0,a.jsxs)(n.lG,{onOpenChange:e.set,open:e.open,children:[(0,a.jsx)(n.LC,{className:"opacity-0"}),(0,a.jsxs)(n.Cf,{className:"hud no-scrollbar h-[100%] max-w-[100%] overflow-y-auto p-0 sm:h-[800px] sm:max-h-[90vh] sm:max-w-[450px]",showCloseButton:!1,children:[(0,a.jsx)(n.L3,{className:"sr-only",children:"Inventory"}),(0,a.jsx)(ec,{})]})]})};var eu=l(73844),ex=l(58702),em=l(71007),eh=l(93550),ef=l(24357),ep=l(39785),eg=l(381),ev=l(34835),ey=l(42220),eb=l(15156),ej=l(33593),ew=l(21844),eN=l(89915);let ek=()=>(0,a.jsxs)(n.lG,{children:[(0,a.jsx)(n.zM,{asChild:!0,children:(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"mt-2 w-full border-gray-600 bg-gray-800 text-gray-300 hover:bg-gray-700",children:"Having Trouble Connecting?"})}),(0,a.jsxs)(n.Cf,{className:"border-gray-700 bg-gray-900 text-white",children:[(0,a.jsxs)(n.c7,{children:[(0,a.jsx)(n.L3,{className:"text-purple-300",children:"Connection Troubleshooting"}),(0,a.jsx)(n.rr,{className:"text-gray-300",children:"We are working on this and hope to have it working better soon. Please wait."})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,a.jsx)("p",{className:"mb-2 font-semibold",children:"Or try these possible fixes:"}),(0,a.jsxs)("ul",{className:"list-inside list-disc space-y-1",children:[(0,a.jsx)("li",{children:"Try on desktop"}),(0,a.jsx)("li",{children:"Try clearing browser cache"}),(0,a.jsx)("li",{children:"Try a different browser"})]})]})})]})]}),eC=e=>{let{onSuccess:t}=e,[l,s]=(0,r.useState)(!1),n=(0,eb.L)(),{disconnect:i}=(0,ej.u)(),o=f.F.auth.setRewardWallet.useMutation(),c=f.F.useUtils(),d=[(0,eN.i)("io.metamask"),(0,eN.i)("walletConnect")],u=async e=>{s(!0);try{let l=e.getAccount();if(!l)throw Error("Failed to get account from wallet");try{await e.switchChain(ey.c),y.o.success("Etherlink network added to your wallet!")}catch(t){console.error("Failed to add Etherlink network:",t);let e=t instanceof Error?t.message:"Unknown error";if(e.includes("chainId")||e.includes("request"))throw Error("Please manually add Etherlink network to your wallet first, then try connecting again.");if(e.includes("rejected")||e.includes("denied"))throw Error("You must add Etherlink network to receive rewards. Please try again and approve the network addition.");throw Error("Failed to add Etherlink network: ".concat(e))}let a=await e.getChain();if((null==a?void 0:a.id)!==ey.c.id)throw Error("Please switch to Etherlink network. Currently on: ".concat((null==a?void 0:a.name)||"Unknown network"));await o.mutateAsync({rewardWalletAddress:l.address}),await c.auth.me.invalidate(),y.o.success("Reward wallet connected!"),null==t||t(l.address),setTimeout(()=>{e.disconnect().catch(e=>{})},200)}catch(e){console.error("Reward wallet connection error:",e),e instanceof Error?e.message.includes("User rejected")?y.o.error("Connection cancelled by user"):e.message.includes("chainId")&&y.o.error("Network error. Please try connecting again."):y.o.error("Failed to connect reward wallet. Please try again.")}finally{s(!1)}},x=l||o.isPending;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-gray-300 text-sm",children:["Connect your reward wallet to link it to your account for future use."," ",(0,a.jsx)("br",{}),"This wallet is separate from your gameplay wallet and can only be set once."]}),(0,a.jsxs)("div",{className:"space-y-2",children:[x?(0,a.jsx)("p",{className:"text-white/60",children:"Loading..."}):n?(0,a.jsx)("p",{className:"text-white/60",children:"try again later"}):(0,a.jsx)(ew.p,{autoConnect:!1,client:ey.S,chain:ey.c,wallets:d,connectModal:{size:"compact",title:"Connect Reward Wallet",titleIcon:"",showThirdwebBranding:!1,termsOfServiceUrl:"",privacyPolicyUrl:""},showAllWallets:!1,onConnect:u,onDisconnect:()=>{console.log("Reward wallet disconnected")},connectButton:{label:x?"Processing...":"Connect Reward Wallet",className:"!w-full !bg-purple-600 hover:!bg-purple-500 disabled:!bg-purple-600/50 !text-white !border-0 !rounded-md !py-2 !px-4 !text-sm !font-medium"},detailsButton:{displayBalanceToken:void 0,connectedAccountName:"Reward Wallet"},switchButton:{label:"Switch Network"}}),(0,a.jsx)(ek,{})]}),x&&(0,a.jsx)("div",{className:"rounded bg-purple-900/30 p-3 text-sm",children:(0,a.jsx)("div",{className:"text-purple-300",children:"Please sign the verification message in your wallet to complete setup."})})]})};var eA=l(30718);function eE(e,t){let l=new Set,a=e;if(t)try{let e=localStorage.getItem(t);null!=e&&(a=JSON.parse(e))}catch(e){}return{getValue:()=>a,setValue:e=>{if(a=e,t)try{void 0===e?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e))}catch(e){}l.forEach(e=>e(a))},subscribe:e=>(l.add(e),()=>l.delete(e))}}function eT(e,t){let l=new Set,a=e;if(t)try{let e=localStorage.getItem(t);null!=e&&(a=JSON.parse(e))}catch(e){}return{getValue:()=>a,setValue:e=>{if(a=e,t)try{localStorage.setItem(t,JSON.stringify(e))}catch(e){}l.forEach(e=>e(a))},subscribe:e=>(l.add(e),()=>l.delete(e))}}let eS=eE(void 0,"".concat("rw_","acct")),eP=eE(void 0,"".concat("rw_","wallet")),eL=eE(void 0,"".concat("rw_","chain")),eD=eT("disconnected","".concat("rw_","status")),eI=eE(void 0,"".concat("rw_","lastWalletId"));function eM(e){eP.setValue(e);let t=e.getAccount();if(eS.setValue(t),!t)return void console.warn("No account found for wallet:",e.id);let l=e.getChain();l&&eL.setValue({...l,rpc:l.rpc||""}),eD.setValue("connected"),eI.setValue(e.id)}async function eR(){eD.setValue("disconnected"),eS.setValue(void 0),eP.setValue(void 0),eL.setValue(void 0)}let e_=function(e){let t=new Set;return{getValue:e,subscribe:e=>(t.add(e),()=>t.delete(e))}}(()=>{let e=eP.getValue();return e?[e]:[]});async function eO(e){return eM(e),e}function eF(e){}function ez(e){var t;(null==(t=eP.getValue())?void 0:t.id)===e.id&&eR()}async function eH(e){return eO(e)}let eB=eT(!1);function eW(e){ez(e)}async function eU(e){eM(e)}async function eV(e){let t=eP.getValue();t&&(await t.switchChain(e),eL.setValue({...e,rpc:e.rpc||""}))}let eX=e=>{let{children:t}=e;return(0,a.jsx)(eA.X,{connectionManager:{activeAccountStore:eS,activeWalletStore:eP,activeWalletChainStore:eL,activeWalletConnectionStatusStore:eD,addConnectedWallet:eM,connect:eO,connectedWallets:e_,defineChains:eF,disconnectWallet:ez,handleConnection:eH,isAutoConnecting:eB,removeConnectedWallet:eW,setActiveWallet:eU,switchActiveWalletChain:eV},children:t})},eq=()=>{var e,t,l,s,n,i;let{me:c,logout:d}=(0,ex.A)(),{profile:u}=te(),{data:h,isLoading:p}=f.F.stats.getStats.useQuery(),{data:g}=f.F.referral.getReferralCode.useQuery(),{data:v}=f.F.referral.getReferralStats.useQuery(),[b,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(!1),C=async()=>{await d()},A=g?"".concat(window.location.origin,"?ref=").concat(g):"",E=async()=>{j(!0),await navigator.clipboard.writeText(A),y.o.success("Referral link copied!"),setTimeout(()=>j(!1),1500)},T=async()=>{(null==h?void 0:h.walletAddress)&&(N(!0),await navigator.clipboard.writeText(h.walletAddress),y.o.success("Wallet address copied!"),setTimeout(()=>N(!1),1500))},S=e=>{let{className:t=""}=e;return(0,a.jsx)("div",{className:"animate-pulse rounded bg-white/20 ".concat(t)})};return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"translate-z-0 absolute bottom-0 z-20 m-0 flex w-full flex-col rounded-[0px] border-[#BD6629] border-t-2 bg-[#f5b76e] text-white",children:(0,a.jsx)("div",{className:"w-full p-2",children:(0,a.jsx)(o.$,{className:"w-full bg-green-600 hover:bg-green-500",onClick:()=>{u.onClose()},children:"DONE"})})}),(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col overflow-hidden",children:(0,a.jsxs)("div",{className:" pixel-scrollbar flex-1 overflow-y-auto bg-gradient-to-b from-green-900/90 to-green-800/90 pb-[80px]",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-4 p-4",children:[(0,a.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white/20",children:(0,a.jsx)(em.A,{size:32})}),(0,a.jsx)("h2",{className:"flex-1 font-bold text-white text-xl",children:"Profile"})]}),(0,a.jsxs)("div",{className:"space-y-4 px-4",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-black/30 p-4",children:[(0,a.jsxs)("h3",{className:"mb-3 flex items-center gap-2 font-semibold text-lg text-white",children:[(0,a.jsx)(m.A,{className:"text-yellow-400",size:20}),"Player Stats"]}),p?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Level"}),(0,a.jsx)(S,{className:"h-7 w-12"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Total XP"}),(0,a.jsx)(S,{className:"h-7 w-16"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Current Coins"}),(0,a.jsx)(S,{className:"h-7 w-20"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Current AP"}),(0,a.jsx)(S,{className:"h-7 w-20"})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Level"}),(0,a.jsx)("span",{className:"font-bold text-xl text-yellow-400",children:null==h?void 0:h.level})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Total XP"}),(0,a.jsx)("span",{className:"font-bold text-blue-400 text-xl",children:null==h?void 0:h.xp})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Current Coins"}),(0,a.jsx)("span",{className:"font-bold text-white text-xl",children:(0,a.jsx)(k.e,{type:"coins",value:null!=(t=null==h?void 0:h.currentCoins)?t:0})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Current AP"}),(0,a.jsx)("span",{className:"font-bold text-white text-xl",children:(0,a.jsx)(k.e,{type:"ap",value:null!=(l=null==h?void 0:h.currentAp)?l:0})})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-black/30 p-4",children:[(0,a.jsxs)("h3",{className:"mb-3 flex items-center gap-2 font-semibold text-lg text-white",children:[(0,a.jsx)(eh.A,{className:"text-green-400",size:20}),"Total Earnings"]}),p?(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Total AP Earned"}),(0,a.jsx)(S,{className:"h-5 w-24"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Total Coins Earned"}),(0,a.jsx)(S,{className:"h-5 w-24"})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Total AP Earned"}),(0,a.jsx)("span",{className:"font-bold text-white",children:(0,a.jsx)(k.e,{type:"ap",value:null!=(s=null==h?void 0:h.totalApEarned)?s:0})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Total Coins Earned"}),(0,a.jsx)("span",{className:"font-bold text-white",children:(0,a.jsx)(k.e,{type:"coins",value:null!=(n=null==h?void 0:h.totalCoinsEarned)?n:0})})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-black/30 p-4",children:[(0,a.jsxs)("h3",{className:"mb-3 flex items-center gap-2 font-semibold text-lg text-white",children:[(0,a.jsx)(x.A,{className:"text-purple-400",size:20}),"Referrals"]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Total Referrals"}),(0,a.jsx)("span",{className:"font-bold text-purple-400 text-xl",children:null!=(i=null==v?void 0:v.totalReferrals)?i:0})]}),(0,a.jsxs)(o.$,{onClick:E,className:"w-full bg-purple-600 hover:bg-purple-500",size:"sm",disabled:b||!A,children:[(0,a.jsx)(ef.A,{size:16,className:"mr-2"}),b?"Copied!":"Copy Referral Link"]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-black/30 p-4",children:[(0,a.jsxs)("h3",{className:"mb-3 flex items-center gap-2 font-semibold text-lg text-white",children:[(0,a.jsx)(ep.A,{className:"text-orange-400",size:20}),"Reward Wallet"]}),(0,a.jsx)("div",{className:"space-y-3 text-sm",children:(null==(e=c.data)?void 0:e.rewardWalletAddress)?(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Wallet Address"}),(0,a.jsx)("div",{className:"mt-1 break-all rounded bg-black/40 p-2 font-mono text-white text-xs",children:c.data.rewardWalletAddress}),(0,a.jsx)("div",{className:"mt-2 text-green-400 text-xs",children:"✓ Reward wallet connected"})]}):(0,a.jsx)(eu.ClientOnly,{children:(0,a.jsx)(eX,{children:(0,a.jsx)(eC,{onSuccess:()=>{}})})})})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-black/30 p-4",children:[(0,a.jsxs)("h3",{className:"mb-3 flex items-center gap-2 font-semibold text-lg text-white",children:[(0,a.jsx)(eg.A,{className:"text-gray-400",size:20}),"Game Wallet"]}),(0,a.jsx)("div",{className:"space-y-3 text-sm",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Wallet Address"}),p?(0,a.jsx)(S,{className:"mt-1 h-8 w-full"}):(0,a.jsxs)("button",{type:"button",onClick:T,className:"mt-1 flex w-full cursor-pointer items-center justify-between gap-2 rounded bg-black/40 p-2 font-mono text-white text-xs transition-colors hover:bg-black/50 disabled:cursor-not-allowed disabled:opacity-50",disabled:w||!(null==h?void 0:h.walletAddress),children:[(0,a.jsx)("span",{className:"flex-1 break-all text-left",children:null==h?void 0:h.walletAddress}),(0,a.jsx)(ef.A,{size:14,className:"flex-shrink-0"})]}),(0,a.jsxs)(o.$,{onClick:C,className:"mt-2 w-full bg-red-600",size:"sm",disabled:!c.data,children:[(0,a.jsx)(ev.A,{size:16,className:"mr-2"}),"Disconnect Wallet"]})]})})]})]})]})})]})},eY=()=>{let{profile:e}=te();return(0,a.jsxs)(n.lG,{onOpenChange:e.set,open:e.open,children:[(0,a.jsx)(i.LC,{className:"opacity-0"}),(0,a.jsxs)(n.Cf,{className:"hud pixel-scrollbar h-[100%] max-w-[100%] overflow-y-auto p-0 sm:h-[800px] sm:max-h-[70vh] sm:max-w-[450px]",showCloseButton:!1,children:[(0,a.jsx)(n.L3,{className:"sr-only",children:"Profile"}),(0,a.jsx)(eq,{})]})]})};var e$=l(46830),eG=l(59929),eK=l(72024),eQ=l(819);let eJ=e=>{let{}=e;return(0,a.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-md bg-red-500/20 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"rounded bg-red-600 px-3 py-1 font-semibold text-white text-xs shadow-lg",children:"LIMIT REACHED"})})};var eZ=l(51154);let e0=()=>(0,a.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center rounded-md bg-black/20 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded bg-blue-600 px-3 py-1 font-semibold text-white text-xs shadow-lg",children:[(0,a.jsx)(eZ.A,{className:"h-3 w-3 animate-spin"}),"PURCHASING..."]})}),e1=e=>{let{minLevel:t,minPrestigeLevel:l,userLevel:s,userPrestigeLevel:r}=e,n=!t||s>=t,i=!l||r>=l;if(n&&i)return null;let o=[];return!n&&t&&o.push("Lvl. ".concat(t)),!i&&l&&o.push((0,a.jsx)(k.e,{type:"prestige",value:l},"prestige")),(0,a.jsxs)("span",{className:"absolute inset-0 flex items-center justify-center gap-1 bg-black/80 p-2 text-white text-xs backdrop-blur-2xl",children:["Requires"," ",o.map((e,t)=>(0,a.jsxs)("span",{className:"flex items-center",children:[e,t<o.length-1&&(0,a.jsx)("span",{className:"mx-1",children:"and"})]},t))]})},e2=e=>{var t;let{tag:l,sortFn:s,highlightFirst:n=!1}=e,{buyItem:i,state:o}=(0,K.v)(),{level:c}=(0,eQ.Y)(),d=f.F.useUtils(),[u,x]=(0,r.useState)(),[m,h]=(0,r.useState)(new Set),p=(0,et.wd)(l),v=null!=(t=null==o?void 0:o.prestigeLevel)?t:0,y=p.sort((e,t)=>{var l,a,r,n;let i=c<(null!=(l=e.config.minLevel)?l:0)||v<(null!=(a=e.config.minPrestigeLevel)?a:0);return i!==(c<(null!=(r=t.config.minLevel)?r:0)||v<(null!=(n=t.config.minPrestigeLevel)?n:0))?i?1:-1:s?s(e.config,t.config):0}),{isAtLimit:b}=function(e){let t=e.filter(e=>e.dailyLimit&&e.dailyLimit>0).length>0,l=f.F.core.getDailyLimitStatus.useQuery(void 0,{enabled:t,staleTime:3e4}),a=e=>t&&l.data&&l.data.find(t=>t.key===e)||null;return{query:l,getLimitStatus:a,isAtLimit:e=>{let t=a(e);return!!t&&t.remaining<=0},hasLimitsToCheck:t}}(p.map(e=>e.config)),j=n&&(null==o?void 0:o.numPlots)===1&&0===o.items.length&&10===o.coins;return(0,a.jsx)("div",{className:"flex flex-col",children:y.map((e,t)=>{var l,s,r,n,f,p;let{key:v,config:y}=e,w=y.dailyLimit&&y.dailyLimit>0,N=m.has(v),C=async()=>{if(w){if(!N){h(e=>new Set(e).add(v));try{await i(v,1),w&&d.core.getDailyLimitStatus.invalidate(),h(e=>{let t=new Set(e);return t.delete(v),t})}catch(e){h(e=>{let t=new Set(e);return t.delete(v),t}),console.error("Purchase failed:",e)}}}else{i(v,1);let e=null==u?void 0:u[v],t=((null==e?void 0:e.quantity)||0)+1,l=y.price.amount*t,a="AP"===y.price.currency?"AP":"$";x(e=>({...e,[v]:{quantity:t,totalCost:l,currency:a}})),setTimeout(()=>{x(e=>{if(!e)return e;let t={...e};return delete t[v],Object.keys(t).length>0?t:void 0})},2e3)}},A=(0,et.jH)(v),E="coins"===y.price.currency?(null!=(l=null==o?void 0:o.coins)?l:0)>=y.price.amount:(null!=(s=null==o?void 0:o.ap)?s:0)>=y.price.amount,T=b(v),S=null!=(r=null==o?void 0:o.prestigeLevel)?r:0,P=null==u?void 0:u[v],L=(0,a.jsx)(e1,{minLevel:y.minLevel,minPrestigeLevel:y.minPrestigeLevel,userLevel:c,userPrestigeLevel:S}),D=c<(null!=(n=y.minLevel)?n:0)||S<(null!=(f=y.minPrestigeLevel)?f:0),I=null;D?I=L:N?I=(0,a.jsx)(e0,{}):T?I=(0,a.jsx)(eJ,{}):P&&(I=(0,a.jsx)(er.zw,{quantity:P.quantity,totalCost:P.totalCost,currency:P.currency}));let M=(0,a.jsx)(es.g,{config:y}),R="seed"===y.metadata.type?"".concat(y.name," Seeds"):y.name;return(0,a.jsx)(er.G9,{title:R,description:M,image:(0,a.jsx)(er.Dy,{src:null!=(p=A.pack)?p:"",alt:R,particleColor:A.particleColor}),rightSide:(0,a.jsx)(k.S,{amount:y.price}),overlay:I,disabled:!(E&&!T&&!N)||D,onClick:C,className:(0,g.cn)({"glow-animate":0===t&&j})},v)})})};var e3=l(66766);let e5=e=>{let{headerImage:t,signImage:l,children:s}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"relative flex-1 p-2",children:(0,a.jsxs)("div",{className:"pixel-scrollbar absolute inset-0 overflow-scroll pb-[126px]",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(e3.default,{alt:"shop image",src:t,width:200,height:200,className:"h-[200px] w-full object-cover"}),(0,a.jsx)(e3.default,{alt:"sign",src:l,width:100,height:64,className:"absolute right-0 bottom-0 object-cover"})]}),s]})})})},e4=[{key:"seeds",label:"Seeds",icon:eG.A,headerImage:"/img/seed-merchant.png",signImage:"/img/simple-seeds.png",tag:"seeds-shop",sortFn:(e,t)=>e.metadata.growDuration-t.metadata.growDuration,highlightFirst:!0},{key:"modifiers",label:"Boosters",icon:Z.A,headerImage:"/img/booster-merchant.png",signImage:"/img/barrys-boosters.png",tag:"boosters-shop",sortFn:void 0,highlightFirst:void 0},{key:"ap",label:"AP Exchange",icon:eK.A,headerImage:"/img/ap-machine.png",signImage:"/img/ap-alchemy.png",tag:"ap-exchange",sortFn:void 0,highlightFirst:void 0}],e6=()=>{let{shop:e}=te(),{state:t}=(0,K.v)(),l=(null==t?void 0:t.numPlots)===1&&t.items.length>0;return(0,a.jsxs)(c.tU,{defaultValue:"seeds",className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"translate-z-0 absolute bottom-0 z-20 m-0 flex w-full flex-col rounded-[0px] border-[#BD6629] border-t-2 bg-[#f5b76e] text-white",children:[(0,a.jsx)(c.j7,{className:"h-[62px] w-full bg-[none]",children:e4.map(e=>{let{key:t,label:l,icon:s}=e;return(0,a.jsxs)(c.Xi,{value:t,className:"!text-black flex-1 flex-col text-[10px] transition-all",children:[(0,a.jsx)(s,{}),(0,a.jsx)("p",{children:l})]},t)})}),(0,a.jsx)("div",{className:"w-full p-2",children:(0,a.jsx)(o.$,{className:(0,g.cn)("w-full bg-green-600 hover:bg-green-500",{"glow-animate":l}),onClick:()=>{e.onClose()},children:"DONE"})})]}),e4.map(e=>{let{key:t,headerImage:l,signImage:s,tag:r,sortFn:n,highlightFirst:i}=e;return(0,a.jsx)(d.av,{value:t,className:"flex h-full flex-col",children:(0,a.jsx)(e5,{headerImage:l,signImage:s,children:(0,a.jsx)(e2,{tag:r,sortFn:n,highlightFirst:i})})},t)})]})},e8=()=>{let{shop:e}=te();return(0,a.jsxs)(n.lG,{onOpenChange:e.set,open:e.open,children:[(0,a.jsx)(i.LC,{className:"opacity-0"}),(0,a.jsxs)(n.Cf,{className:"hud pixel-scrollbar h-[100%] max-w-[100%] overflow-y-auto p-0 sm:h-[800px] sm:max-h-[90vh] sm:max-w-[450px]",showCloseButton:!1,children:[(0,a.jsx)(n.L3,{className:"sr-only",children:"Shop"}),(0,a.jsx)(e$.T,{className:"fixed z-[20] flex gap-2 rounded-br-md bg-black/40 px-2"}),(0,a.jsx)(e6,{})]})]})},e9=(0,r.createContext)({}),e7=e=>{let{children:t}=e,l=(0,s.j)(),r=(0,s.j)(),n=(0,s.j)(),i=(0,s.j)(),o=(0,s.j)();return(0,a.jsxs)(e9.Provider,{value:{shop:l,inventory:r,earnAp:n,profile:i,farmhouse:o},children:[t,(0,a.jsx)(e8,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(Y,{}),(0,a.jsx)(eY,{}),(0,a.jsx)(Q,{})]})},te=()=>{let e=(0,r.useContext)(e9);if(!e)throw Error("useHudDialogs must be used within a HudDialogsProvider");return e}},96022:(e,t,l)=>{l.d(t,{g:()=>u});var a=l(95155),s=l(61520),r=l(23447),n=l(59434),i=l(47121),o=l(73599);let c=e=>{var t,l;let{config:s}=e,r=null==(t=i.F.core.getDailyLimitStatus.useQuery(void 0,{enabled:!!(s.dailyLimit&&s.dailyLimit>0),staleTime:3e4}).data)?void 0:t.find(e=>e.key===s.key);return!s.dailyLimit||s.dailyLimit<=0?null:(0,a.jsxs)("span",{className:"text-gray-600 text-sm",children:["• ",null!=(l=null==r?void 0:r.remaining)?l:s.dailyLimit,"/",s.dailyLimit," left today"]})},d=e=>{let{config:t}=e;return"ap-exchange"!==t.metadata.type?null:(0,a.jsx)("div",{className:"flex flex-col gap-1 text-sm",children:(0,a.jsxs)("div",{className:"text-gray-600",children:["Yields ",t.metadata.yield.amount," ",t.metadata.yield.currency,t.dailyLimit&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(c,{config:t})]})]})})},u=e=>{let{config:t}=e,{prestigeMultiplier:l}=(0,s.v)();if("seed"===t.metadata.type){let e=(0,r.x)(t.metadata.growDuration),s=l>1&&"AP"===t.metadata.yield.currency;return(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-[2px]",children:[e," ","=>"," ",(0,a.jsx)(o.e,{type:"AP"===t.metadata.yield.currency?"ap":"coins",value:t.metadata.yield.amount,imgClassName:"h-[16px] w-[16px]"}),s&&(0,a.jsxs)("span",{className:"font-semibold text-prestige text-xs",children:["x",l.toFixed(1)]}),t.dailyLimit&&(0,a.jsx)(c,{config:t})]})}if("modifier"===t.metadata.type){let e=1!==t.metadata.yieldMultiplier?(0,n.X)(t.metadata.yieldMultiplier):"",l=1!==t.metadata.growthMultiplier?(0,n.w)(t.metadata.growthMultiplier):"",s="for ".concat((0,r.x)(t.metadata.duration)," "),i=t.metadata.yieldCurrencyRestriction?"".concat(t.metadata.yieldCurrencyRestriction,"  only"):"",o=[e,l,i,s].filter(Boolean);return(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-[2px]",children:[(0,a.jsx)("span",{children:o.map((e,t)=>e===i&&i?(0,a.jsx)("span",{className:"font-bold text-orange-600 bg-black px-2 rounded mx-2",children:e},i):(0,a.jsxs)("span",{children:[t>0&&", ",e]},e))}),t.dailyLimit&&(0,a.jsx)(c,{config:t})]})}return"ap-exchange"===t.metadata.type?(0,a.jsx)(d,{config:t}):null}}}]);